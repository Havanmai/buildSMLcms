"use strict";(self.webpackChunksmartlocker_workspace=self.webpackChunksmartlocker_workspace||[]).push([[543],{90543:(W,f,s)=>{s.r(f),s.d(f,{AddressModule:()=>k});var g=s(38583),Z=s(39895),d=s(34100),y=s(86151),a=s(3679),t=s(37716),c=s(26214),D=s(77570),A=s(39970),h=s(75887),m=s(16704),T=s(82677),p=s(80269),v=s(57674),C=s(14453),E=s(29374),_=s(84514);function q(n,i){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.editModal?"Ch\u1ec9nh s\u1eeda \u0111\u1ecba ch\u1ec9":"T\u1ea1o m\u1edbi \u0111\u1ecba ch\u1ec9"," ")}}function S(n,i){if(1&n&&t._UZ(0,"nz-option",23),2&n){const e=i.$implicit;t.Q6J("nzValue",e.maTinh)("nzLabel",e.name)}}function x(n,i){if(1&n&&t._UZ(0,"nz-option",23),2&n){const e=i.$implicit;t.Q6J("nzValue",e.id)("nzLabel",e.tenQuanHuyen)}}function O(n,i){if(1&n&&t._UZ(0,"nz-option",24),2&n){const e=i.$implicit;t.Q6J("nzValue",e.id)("nzLabel",e.name)}}function P(n,i){if(1&n&&t._UZ(0,"nz-option",24),2&n){const e=i.$implicit;t.Q6J("nzValue",e.id)("nzLabel",e.name)}}function I(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw().submitContent()}),t._uU(2," C\u1eadp nh\u1eadt "),t.qZA(),t.TgZ(3,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancelContent()}),t._uU(4,"H\u1ee7y"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("nzLoading",e.createSubmitting)}}const L=function(){return[20,20]};let b=(()=>{class n{constructor(e,o,r,l,z){this.fb=e,this.modalRef=o,this.baseService=r,this.storeService=l,this.addressService=z,this.createSubmitting=!1,this.listOfOption=[],this.page=0,this.size=10,this.totalReceiver=0,this.isLoading=!1,this.nzFilterOption=()=>!0,this.getProvince(),this.getBuildClass(),this.getLocationLocker()}ngOnInit(){this.createContentForm=this.fb.group({provinceId:[null,[a.kI.required]],distId:[null,[a.kI.required]],wardId:[null,[a.kI.required]],detail:[null,[a.kI.required]],buildclass:[null,[a.kI.required]]}),this.data?(this.editModal=!0,this.id=this.data.id,console.log("data",this.data),this.getListDistByProvice(this.data.vtpPhuongXa.maTinh),this.getListWardByDist(this.data.vtpPhuongXa.quanHuyen.id),this.createContentForm.controls.provinceId.setValue(this.data.vtpPhuongXa.maTinh),this.createContentForm.controls.distId.setValue(this.data.vtpPhuongXa.quanHuyen.id),this.createContentForm.controls.wardId.setValue(this.data.vtpPhuongXa.id),this.createContentForm.controls.detail.setValue(this.data.detail),this.createContentForm.controls.buildclass.setValue(this.data.place.id),this.createContentForm.controls.locationlocker.setValue(this.data.buildingClass.id)):(this.editModal=!1,this.createContentForm.controls.provinceId.setValue(null),this.createContentForm.controls.distId.setValue(null),this.createContentForm.controls.wardId.setValue(null),this.createContentForm.controls.detail.setValue(null),this.createContentForm.controls.buildclass.setValue(null),this.createContentForm.controls.locationlocker.setValue(null))}getListDistByProvice(e){this.storeService.getDistByProvince(e).subscribe(o=>{0==o.error&&(this.listOfDist=o.data.data)})}getListWardByDist(e){this.storeService.getWardByDist(e).subscribe(o=>{0==o.error&&(this.listOfWard=o.data.data)})}getProvince(){this.storeService.getAllProvince().subscribe(e=>{0==e.error&&(this.listOfProvince=e.data.data)})}getBuildClass(){this.addressService.getAllRatingBuildingLocker().subscribe(e=>{0==e.error&&(this.listOfBuidClass=e.data.data)})}getLocationLocker(){this.addressService.getAllLocationLocker().subscribe(e=>{0==e.error&&(this.listOfLocationLocker=e.data.data)})}provinceChange(e){null!=e?this.storeService.getDistByProvince(e).subscribe(o=>{0==o.error&&(this.listOfWard=[],this.createContentForm.controls.distId.setValue(null),this.createContentForm.controls.wardId.setValue(null),this.listOfDist=o.data.data)}):(this.listOfDist=[],this.listOfWard=[],this.createContentForm.controls.distId.setValue(null))}distChange(e){null!=e?this.storeService.getWardByDist(e).subscribe(o=>{0==o.error&&(this.createContentForm.controls.wardId.setValue(null),this.listOfWard=o.data.data)}):(this.listOfWard=[],this.createContentForm.controls.wardId.setValue(null))}wardChange(e){null!=e?this.storeService.getWardByDist(e).subscribe(o=>{0==o.error&&(this.createContentForm.controls.wardId.setValue(null),this.listOfWard=o.data.data)}):(this.listOfWard=[],this.createContentForm.controls.wardId.setValue(null))}submitContent(){for(const e in this.createContentForm.controls)this.createContentForm.controls.hasOwnProperty(e)&&(this.createContentForm.controls[e].markAsDirty(),this.createContentForm.controls[e].updateValueAndValidity());this.datenow=new Date,this.createContentForm.invalid||(0==this.editModal?this.addressService.createAddress(this.createContentForm.controls.wardId.value,this.createContentForm.controls.detail.value,this.createContentForm.controls.buildclass.value).subscribe(e=>{0==e.error&&(console.log("create",e),this.baseService.showToast("Kh\u1edfi t\u1ea1o th\xe0nh c\xf4ng \u0111\u1ecba ch\u1ec9 m\u1edbi",d.gT.TOAST_OK),this.addressService.reloadItem(),this.cancelContent())},e=>{console.log("Kh\u1edfi t\u1ea1o th\u1ea5t b\u1ea1i",e)}):this.addressService.editAddress(this.id,this.createContentForm.controls.wardId.value,this.createContentForm.controls.detail.value,this.createContentForm.controls.buildclass.value).subscribe(e=>{0==e.error&&(console.log(e),this.baseService.showToast("Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng \u0111\u1ecba ch\u1ec9 m\u1edbi",d.gT.TOAST_OK),this.addressService.reloadItem(),this.cancelContent())},e=>{console.log("Ch\u1ec9nh s\u1eeda th\u1ea5t b\u1ea1i",e)}))}cancelContent(){this.modalRef.destroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.qu),t.Y36(c.Lf),t.Y36(d.bQ),t.Y36(D.d),t.Y36(A.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cms-create"]],inputs:{data:"data"},decls:43,vars:8,consts:[[4,"nzModalTitle"],["nz-form","",1,"px-3",3,"formGroup","nzLayout","ngSubmit"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","8"],["nzFor","provinceId","nzRequired",""],["nz-typography",""],["nzErrorTip","Vui l\xf2ng ch\u1ecdn T\u1ec9nh/Th\xe0nh ph\u1ed1!"],["nzShowSearch","","formControlName","provinceId","nzPlaceHolder","Ch\u1ecdn t\u1ec9nh","nzAllowClear","",1,"width-full",3,"ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzFor","distId","nzRequired",""],["nzErrorTip","Vui l\xf2ng ch\u1ecdn Qu\u1eadn/Huy\u1ec7n!"],["nzShowSearch","","formControlName","distId","nzPlaceHolder","Ch\u1ecdn qu\u1eadn/huy\u1ec7n","nzAllowClear","",1,"width-full",3,"ngModelChange"],["nzFor","wardId","nzRequired",""],["nzErrorTip","Vui l\xf2ng ch\u1ecdn Ph\u01b0\u1eddng/X\xe3!"],["nzShowSearch","","formControlName","wardId","nzPlaceHolder","Ch\u1ecdn ph\u01b0\u1eddng/x\xe3","nzAllowClear","",1,"width-full"],["class","width-full",3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzFor","detail","nzRequired",""],["nzErrorTip","Vui l\xf2ng nh\u1eadp n\u1ed9i dung!"],["nz-input","","id","detail","formControlName","detail","placeholder","Nh\u1eadp n\u1ed9i dung",1,"pl-3"],["nzFor","buildclass","nzRequired",""],["nzErrorTip","Vui l\xf2ng ch\u1ecdn ph\xe2n h\u1ea1ng \u0111i\u1ec3m \u0111\u1eb7t!"],["nzShowSearch","","formControlName","buildclass","nzPlaceHolder","Ch\u1ecdn ph\xe2n h\u1ea1ng \u0111i\u1ec3m \u0111\u1eb7t","nzAllowClear","",1,"width-full"],[4,"nzModalFooter"],[3,"nzValue","nzLabel"],[1,"width-full",3,"nzValue","nzLabel"],["nz-button","","nzType","primary",1,"m-2",3,"nzLoading","click"],["nz-button","","nzType","default",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div"),t.YNc(1,q,2,1,"div",0),t.TgZ(2,"div"),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return o.submitContent()}),t.TgZ(4,"div",2),t.TgZ(5,"div",3),t.TgZ(6,"nz-form-item"),t.TgZ(7,"nz-form-label",4),t.TgZ(8,"span",5),t._uU(9,"T\u1ec9nh/Th\xe0nh ph\u1ed1"),t.qZA(),t.qZA(),t.TgZ(10,"nz-form-control",6),t.TgZ(11,"nz-select",7),t.NdJ("ngModelChange",function(l){return o.provinceChange(l)}),t.YNc(12,S,1,2,"nz-option",8),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",3),t.TgZ(14,"nz-form-item"),t.TgZ(15,"nz-form-label",9),t.TgZ(16,"span",5),t._uU(17,"Qu\u1eadn/Huy\u1ec7n"),t.qZA(),t.qZA(),t.TgZ(18,"nz-form-control",10),t.TgZ(19,"nz-select",11),t.NdJ("ngModelChange",function(l){return o.distChange(l)}),t.YNc(20,x,1,2,"nz-option",8),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",3),t.TgZ(22,"nz-form-item"),t.TgZ(23,"nz-form-label",12),t.TgZ(24,"span",5),t._uU(25,"Ph\u01b0\u1eddng/X\xe3"),t.qZA(),t.qZA(),t.TgZ(26,"nz-form-control",13),t.TgZ(27,"nz-select",14),t.YNc(28,O,1,2,"nz-option",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"nz-form-item"),t.TgZ(30,"nz-form-label",16),t.TgZ(31,"span",5),t._uU(32,"\u0110\u1ecba ch\u1ec9 chi ti\u1ebft"),t.qZA(),t.qZA(),t.TgZ(33,"nz-form-control",17),t._UZ(34,"input",18),t.qZA(),t.qZA(),t.TgZ(35,"nz-form-item"),t.TgZ(36,"nz-form-label",19),t.TgZ(37,"span",5),t._uU(38,"Ph\xe2n h\u1ea1ng \u0111i\u1ec3m \u0111\u1eb7t"),t.qZA(),t.qZA(),t.TgZ(39,"nz-form-control",20),t.TgZ(40,"nz-select",21),t.YNc(41,P,1,2,"nz-option",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(42,I,5,1,"div",22),t.qZA()),2&e&&(t.xp6(3),t.Q6J("formGroup",o.createContentForm)("nzLayout","vertical"),t.xp6(1),t.Q6J("nzGutter",t.DdM(7,L)),t.xp6(8),t.Q6J("ngForOf",o.listOfProvince),t.xp6(8),t.Q6J("ngForOf",o.listOfDist),t.xp6(8),t.Q6J("ngForOf",o.listOfWard),t.xp6(13),t.Q6J("ngForOf",o.listOfBuidClass))},directives:[c.h1,a._Y,a.JL,h.Lr,a.sg,m.SK,m.t3,h.Nx,h.iK,T.ZU,h.Fd,p.Vq,a.JJ,a.u,g.sg,v.Zp,a.Fj,c.Uh,p.Ip,C.ix,E.dQ,_.w],styles:[""]}),n})();var F=s(53599),u=s(43654);function V(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t.TgZ(12,"button",10),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().editAddress(l)}),t._UZ(13,"i",11),t.qZA(),t.TgZ(14,"button",12),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().deleteAddress(l)}),t._UZ(15,"i",13),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(2),t.hij(" ",e.vtpPhuongXa&&e.vtpPhuongXa.quanHuyen&&e.vtpPhuongXa.quanHuyen.tinh&&e.vtpPhuongXa.quanHuyen.tinh.name?e.vtpPhuongXa.quanHuyen.tinh.name:"-"," "),t.xp6(2),t.hij(" ",e.vtpPhuongXa&&e.vtpPhuongXa.quanHuyen&&e.vtpPhuongXa.quanHuyen.tenQuanHuyen?e.vtpPhuongXa.quanHuyen.tenQuanHuyen:"-"," "),t.xp6(2),t.hij(" ",e.vtpPhuongXa&&e.vtpPhuongXa.name?e.vtpPhuongXa.name:"-"," "),t.xp6(2),t.Oqu(e.detail?e.detail:"-")}}function B(n,i){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("T\u1ed5ng ",e.total," b\u1ea3n ghi")}}function U(n,i){if(1&n&&t.YNc(0,B,2,1,"span",14),2&n){const e=t.oxw();t.Q6J("ngIf",e.total)}}const w=[{path:"",component:(()=>{class n{constructor(e,o,r){this.baseService=e,this.modal=o,this.addressService=r,this.listOfData=[],this.addressService.reloadItemList$.subscribe(l=>{this.page=1,this.size=10,this.getAllAddress()})}ngOnInit(){this.page=1,this.size=10,this.getAllAddress()}searchKeyWord(){}pageChange(e){this.page=e,this.getAllAddress()}searchPost(e){}getAllAddress(){this.baseService.showLoading(!0),this.addressService.getAllAddress(this.page-1,this.size).subscribe(e=>{this.baseService.showLoading(!1),0==e.error&&(console.log("list address",e),this.responseProcess(e))},e=>{console.log("kh\xf4ng g\u1eedi \u0111\u01b0\u1ee3c request l\u1ea5y all buu cuc",e)})}responseProcess(e){this.total=e.data.total,this.listOfData=[],e.data.data.forEach(o=>{let r=new y.ws(o);this.listOfData.push(r)})}createAddress(){this.modal.create({nzContent:b,nzClosable:!1})}editAddress(e){this.modal.create({nzContent:b,nzComponentParams:{data:e},nzClosable:!1})}deleteAddress(e){this.modal.confirm({nzTitle:`<i>B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a kho h\xe0ng <b>${e.name}</b> n\xe0y kh\xf4ng?</i>`,nzOnOk:()=>{this.baseService.showLoading(!0),this.addressService.deleteAddressItem(e.id).subscribe(o=>{this.baseService.showLoading(!1),0===o.error&&(this.baseService.showToast("X\xf3a \u0111\u1ecba ch\u1ec9 th\xe0nh c\xf4ng",d.gT.TOAST_OK),this.getAllAddress())},()=>{this.baseService.showLoading(!1)})},nzClosable:!1,nzCancelText:"T\xf4i kh\xf4ng mu\u1ed1n",nzOkText:"\u0110\u1ed3ng \xfd"})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.bQ),t.Y36(c.Sf),t.Y36(A.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cms-address"]],decls:27,vars:8,consts:[["title","Qu\u1ea3n l\xfd \u0111\u1ecba \u0111i\u1ec3m",3,"close"],["action",""],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],["content","",1,"mt-11"],[1,"mt-5",3,"nzData","nzFooter","nzFrontPagination","nzPageSize","nzPageIndex","nzTotal","nzPageIndexChange"],["basicTable",""],["nzWith","200px"],[4,"ngFor","ngForOf"],["footer",""],["nz-button","","nzType","text","title","S\u1eeda",1,"mr-1",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-button","","nzType","text","title","X\xf3a",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline",1,"text-danger"],[4,"ngIf"]],template:function(e,o){if(1&e&&(t.TgZ(0,"cms-page",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return o.createAddress()}),t._UZ(3,"i",3),t._uU(4," T\u1ea1o m\u1edbi "),t.qZA(),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"nz-table",5,6),t.NdJ("nzPageIndexChange",function(l){return o.pageChange(l)}),t.TgZ(8,"thead"),t.TgZ(9,"tr"),t.TgZ(10,"th",7),t._uU(11,"M\xe3"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"T\u1ec9nh"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Qu\u1eadn/Huy\u1ec7n"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Ph\u01b0\u1eddng/X\xe3"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"\u0110\u1ecba ch\u1ec9 chi ti\u1ebft"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"H\xe0nh \u0111\u1ed9ng"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"tbody"),t.YNc(23,V,16,5,"tr",8),t.qZA(),t.YNc(24,U,1,1,"ng-template",null,9,t.W1O),t.qZA(),t._UZ(26,"div"),t.qZA(),t.qZA()),2&e){const r=t.MAs(7),l=t.MAs(25);t.Q6J("close",!1),t.xp6(6),t.Q6J("nzData",o.listOfData)("nzFooter",l)("nzFrontPagination",!1)("nzPageSize",o.size)("nzPageIndex",o.page)("nzTotal",o.total),t.xp6(17),t.Q6J("ngForOf",r.data)}},directives:[d.Zd,C.ix,E.dQ,_.w,F.Ls,u.N8,u.Om,u.$Z,u.Uo,u._C,u.p0,g.sg,g.O5],styles:[""]}),n})()}];let J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[Z.Bz.forChild(w)],Z.Bz]}),n})();var Q=s(17018),M=s(52079),H=s(36442),N=s(93845),X=s(91841),Y=s(25716);let k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.ez,J,Q.vh,d.IR,C.sL,F.PV,v.o7,h.U5,a.u5,a.UX,m.Jb,u.HQ,p.LV,M.Wr,T.ZJ,H.mS,N.X,c.Qp,X.JF,Y.j]]}),n})()}}]);