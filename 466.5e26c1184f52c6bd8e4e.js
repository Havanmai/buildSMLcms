"use strict";(self.webpackChunksmartlocker_workspace=self.webpackChunksmartlocker_workspace||[]).push([[466],{74466:(w,p,o)=>{o.r(p),o.d(p,{BuildingClassificationModule:()=>O});var m=o(38583),B=o(39895),r=o(34100),Z=o(77937),v=o(23815),i=o(37716),z=o(79765),C=o(91841);let A=(()=>{class t{constructor(n){this.http=n,this.editRatingBuilding$=new z.xQ,this.reloadRatingBuildingLocker$=new z.xQ}getAllRatingBuildingLocker(n=0,e=10){return this.http.get("smartlocker-locker/api/v1/building-classifications?page="+n+"&size="+e)}postRatingBuildingLocker(n,e){return this.http.post("smartlocker-locker/api/v1/building-classifications",JSON.stringify({name:n,note:e}))}updateRatingBuildingLocker(n,e,a){return this.http.put("smartlocker-locker/api/v1/building-classifications/"+n,JSON.stringify({id:n,name:e,note:a}))}deleteRatingBuildingLocker(n){return this.http.delete("smartlocker-locker/api/v1/building-classifications/"+n)}editRatingBuilding(n){this.editRatingBuilding$.next(n)}reloadRatingBuildingLocker(){this.reloadRatingBuildingLocker$.next()}}return t.\u0275fac=function(n){return new(n||t)(i.LFG(C.eN))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=o(3679),c=o(26214),T=o(14453),_=o(29374),x=o(84514),b=o(53599),u=o(43654),d=o(75887),f=o(16704),R=o(57674);function S(t,l){if(1&t){const n=i.EpF();i.TgZ(0,"tr"),i.TgZ(1,"td"),i._uU(2),i.qZA(),i.TgZ(3,"td",13),i._uU(4),i.qZA(),i.TgZ(5,"td"),i.TgZ(6,"button",14),i.NdJ("click",function(){const s=i.CHM(n).$implicit;return i.oxw().onEdit(s)}),i._UZ(7,"i",15),i.qZA(),i.TgZ(8,"button",16),i.NdJ("click",function(){const s=i.CHM(n).$implicit;return i.oxw().onDelete(s)}),i._UZ(9,"i",17),i.qZA(),i.qZA(),i.qZA()}if(2&t){const n=l.$implicit,e=l.index;i.xp6(2),i.Oqu(e+1),i.xp6(2),i.Oqu(n.name)}}function k(t,l){if(1&t&&(i.TgZ(0,"span"),i._uU(1),i.qZA()),2&t){const n=i.oxw(2);i.xp6(1),i.hij("T\u1ed5ng ",n.total," b\u1ea3n ghi")}}function E(t,l){if(1&t&&i.YNc(0,k,2,1,"span",18),2&t){const n=i.oxw();i.Q6J("ngIf",n.total)}}function F(t,l){if(1&t){const n=i.EpF();i.ynx(0),i.TgZ(1,"form",19),i.NdJ("ngSubmit",function(){return i.CHM(n),i.oxw().submitRatingBuilding()}),i.TgZ(2,"nz-form-item"),i.TgZ(3,"nz-form-label",20),i.TgZ(4,"span"),i._uU(5,"Ph\xe2n h\u1ea1ng t\xf2a nh\xe0"),i.qZA(),i.qZA(),i.TgZ(6,"nz-form-control",21),i._UZ(7,"input",22),i.qZA(),i.qZA(),i.TgZ(8,"nz-form-item"),i.TgZ(9,"nz-form-label",23),i.TgZ(10,"span"),i._uU(11,"Ghi ch\xfa"),i.qZA(),i.qZA(),i.TgZ(12,"nz-form-control",24),i._UZ(13,"textarea",25),i.qZA(),i.qZA(),i._UZ(14,"button",26),i.qZA(),i.BQk()}if(2&t){const n=i.oxw();i.xp6(1),i.Q6J("formGroup",n.createRatingBuildingForm),i.xp6(2),i.Q6J("nzSm",6)("nzXs",24),i.xp6(3),i.Q6J("nzSm",14)("nzXs",24),i.xp6(3),i.Q6J("nzSm",6)("nzXs",24),i.xp6(3),i.Q6J("nzSm",14)("nzXs",24)}}function L(t,l){if(1&t){const n=i.EpF();i.TgZ(0,"div"),i.TgZ(1,"button",27),i.NdJ("click",function(){return i.CHM(n),i.oxw().submitRatingBuilding()}),i._uU(2),i.qZA(),i.TgZ(3,"button",28),i.NdJ("click",function(){return i.CHM(n),i.oxw().cancelModal()}),i._uU(4,"H\u1ee7y"),i.qZA(),i.qZA()}if(2&t){const n=i.oxw();i.xp6(1),i.Q6J("nzLoading",n.submitting),i.xp6(1),i.hij(" ",n.editRatingBuilding?"C\u1eadp nh\u1eadt ph\xe2n h\u1ea1ng t\xf2a nh\xe0":"T\u1ea1o ph\xe2n h\u1ea1ng t\xf2a nh\xe0"," ")}}const y=[{path:"",component:(()=>{class t{constructor(n,e,a,s){this.baseService=n,this.buildingClassService=e,this.fb=a,this.modal=s,this.showCreateRatingBuilding=!1,this.editRatingBuilding=!1,this.submitting=!1,this.listRatingBuildingLocker=[],this.filterRatingBuilding={pageSize:10,pageNumber:1},this.total=0,this.objRatingBuilding={id:null,name:null,note:null},this.getAllLockerRatingBuildingCategory(),this.buildingClassService.reloadRatingBuildingLocker$.subscribe(h=>{this.getAllLockerRatingBuildingCategory()}),this.buildingClassService.editRatingBuilding$.subscribe(h=>{this.editRatingBuildingLocker(h)})}ngOnInit(){this.createRatingBuildingForm=this.fb.group({ratingBuildingName:[null],note:[null]})}createRatingBuildingLocker(){this.showCreateRatingBuilding=!0,this.editRatingBuilding=!1,this.createRatingBuildingForm.controls.ratingBuildingName.setValue(null),this.createRatingBuildingForm.controls.note.setValue(null)}onPageChange(n){this.filterRatingBuilding.pageNumber=n,this.getAllLockerRatingBuildingCategory()}onEdit(n){this.buildingClassService.editRatingBuilding(n)}onDelete(n){this.modal.confirm({nzTitle:`<i>B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a v\u1ecb tr\xed Locker ${n.name} n\xe0y kh\xf4ng?</i>`,nzOnOk:()=>{this.baseService.showLoading(!0),this.buildingClassService.deleteRatingBuildingLocker(n.id).subscribe(e=>{this.baseService.showLoading(!1),0===e.error&&(this.baseService.showToast("X\xf3a v\u1ecb tr\xed Locker th\xe0nh c\xf4ng",r.gT.TOAST_OK),this.getAllLockerRatingBuildingCategory())},()=>{this.baseService.showLoading(!1)})},nzClosable:!1,nzCancelText:"T\xf4i kh\xf4ng mu\u1ed1n",nzOkText:"\u0110\u1ed3ng \xfd"})}getAllLockerRatingBuildingCategory(){this.baseService.showLoading(!0),this.buildingClassService.getAllRatingBuildingLocker(this.filterRatingBuilding.pageNumber-1,this.filterRatingBuilding.pageSize).subscribe(n=>{this.baseService.showLoading(!1),n&&n.data.data&&(this.listRatingBuildingLocker=[],v.each(n.data.data,e=>{const a=new Z.q(e);this.listRatingBuildingLocker.push(a)}),this.total=n.data.total)},n=>{console.log("Kh\xf4ng g\u1eedi \u0111\u01b0\u1ee3c y\xeau c\u1ea7u l\u1ea5y th\xf4ng tin",n)})}editRatingBuildingLocker(n){this.showCreateRatingBuilding=!0,this.editRatingBuilding=!0,this.id=n.id,this.createRatingBuildingForm.controls.ratingBuildingName.setValue(n.name),this.createRatingBuildingForm.controls.note.setValue(n.note)}submitRatingBuilding(){for(const n in this.createRatingBuildingForm.controls)this.createRatingBuildingForm.controls.hasOwnProperty(n)&&(this.createRatingBuildingForm.controls[n].markAsDirty(),this.createRatingBuildingForm.controls[n].updateValueAndValidity());this.createRatingBuildingForm.invalid||(this.editRatingBuilding?(this.submitting=!0,this.buildingClassService.updateRatingBuildingLocker(this.id,this.createRatingBuildingForm.controls.ratingBuildingName.value,this.createRatingBuildingForm.controls.note.value).subscribe(n=>{this.submitting=!1,0===n.error?(this.baseService.showToast("C\u1eadp nh\u1eadt ph\xe2n h\u1ea1ng t\xf2a nh\xe0 th\xe0nh c\xf4ng",r.gT.TOAST_OK),this.cancelModal(),this.buildingClassService.reloadRatingBuildingLocker()):this.baseService.showToast("C\u1eadp nh\u1eadt ph\xe2n h\u1ea1ng t\xf2a nh\xe0 kh\xf4ng th\xe0nh c\xf4ng",r.gT.TOAST_ERROR)},n=>{this.submitting=!1})):(this.submitting=!0,this.buildingClassService.postRatingBuildingLocker(this.createRatingBuildingForm.controls.ratingBuildingName.value,this.createRatingBuildingForm.controls.note.value).subscribe(n=>{this.submitting=!1,0===n.error?(this.baseService.showToast("T\u1ea1o ph\xe2n h\u1ea1ng t\xf2a nh\xe0 th\xe0nh c\xf4ng",r.gT.TOAST_OK),this.cancelModal(),this.buildingClassService.reloadRatingBuildingLocker()):this.baseService.showToast("T\u1ea1o ph\xe2n h\u1ea1ng t\xf2a nh\xe0 kh\xf4ng th\xe0nh c\xf4ng",r.gT.TOAST_ERROR)},n=>{this.submitting=!1})))}cancelModal(){this.showCreateRatingBuilding=!1}}return t.\u0275fac=function(n){return new(n||t)(i.Y36(r.bQ),i.Y36(A),i.Y36(g.qu),i.Y36(c.Sf))},t.\u0275cmp=i.Xpm({type:t,selectors:[["cms-building-classification"]],decls:23,vars:10,consts:[["title","Ph\xe2n h\u1ea1ng t\xf2a nh\xe0",3,"close"],["action",""],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[1,"d-none","d-md-inline-block"],["content","",1,"mt-8"],[1,"mt-11",3,"nzData","nzFrontPagination","nzFooter","nzPageSize","nzPageIndex","nzTotal","nzPageIndexChange"],["nzWidth","160px"],[4,"ngFor","ngForOf"],["footer",""],["nzTitle","T\u1ea1o m\u1edbi ph\xe2n h\u1ea1ng t\xf2a nh\xe0",2,"width","500px !important",3,"nzVisible","nzClosable","nzVisibleChange"],[4,"nzModalContent"],[4,"nzModalFooter"],[1,"text-bold"],["nz-button","","nzType","text","title","S\u1eeda",1,"mr-1",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-button","","nzType","text","title","X\xf3a",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline",1,"text-danger"],[4,"ngIf"],["nz-form","",3,"formGroup","ngSubmit"],["nzFor","ratingBuildingName",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp v\u1ecb tr\xed locker!",3,"nzSm","nzXs"],["nz-input","","id","ratingBuildingName","formControlName","ratingBuildingName","placeholder","Nh\u1eadp ph\xe2n h\u1ea1ng t\xf2a nh\xe0"],["nzFor","note",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["nz-input","","id","note","formControlName","note","placeholder","Ghi ch\xfa"],[1,"d-none"],["nz-button","","nzType","primary",1,"m-2",3,"nzLoading","click"],["nz-button","","nzType","default",3,"click"]],template:function(n,e){if(1&n&&(i.TgZ(0,"cms-page",0),i.TgZ(1,"div",1),i.TgZ(2,"button",2),i.NdJ("click",function(){return e.createRatingBuildingLocker()}),i._UZ(3,"i",3),i.TgZ(4,"span",4),i._uU(5,"T\u1ea1o ph\xe2n h\u1ea1ng t\xf2a nh\xe0"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(6,"div",5),i.TgZ(7,"nz-table",6),i.NdJ("nzPageIndexChange",function(s){return e.onPageChange(s)}),i.TgZ(8,"thead"),i.TgZ(9,"tr"),i.TgZ(10,"th"),i._uU(11,"M\xe3"),i.qZA(),i.TgZ(12,"th"),i._uU(13,"Ph\xe2n h\u1ea1ng"),i.qZA(),i.TgZ(14,"th",7),i._uU(15,"H\xe0nh \u0111\u1ed9ng"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(16,"tbody"),i.YNc(17,S,10,2,"tr",8),i.qZA(),i.YNc(18,E,1,1,"ng-template",null,9,i.W1O),i.qZA(),i.qZA(),i.qZA(),i.TgZ(20,"nz-modal",10),i.NdJ("nzVisibleChange",function(s){return e.showCreateRatingBuilding=s}),i.YNc(21,F,15,9,"ng-container",11),i.YNc(22,L,5,2,"div",12),i.qZA()),2&n){const a=i.MAs(19);i.Q6J("close",!1),i.xp6(7),i.Q6J("nzData",e.listRatingBuildingLocker)("nzFrontPagination",!1)("nzFooter",a)("nzPageSize",e.filterRatingBuilding.pageSize)("nzPageIndex",e.filterRatingBuilding.pageNumber)("nzTotal",e.total),i.xp6(10),i.Q6J("ngForOf",e.listRatingBuildingLocker),i.xp6(3),i.Q6J("nzVisible",e.showCreateRatingBuilding)("nzClosable",!1)}},directives:[r.Zd,T.ix,_.dQ,x.w,b.Ls,u.N8,u.Om,u.$Z,u.Uo,u._C,u.p0,m.sg,c.du,c.Hf,c.Uh,m.O5,g._Y,g.JL,d.Lr,g.sg,f.SK,d.Nx,f.t3,d.iK,d.Fd,R.Zp,g.Fj,g.JJ,g.u],styles:[""]}),t})()}];let N=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[B.Bz.forChild(y)],B.Bz]}),t})();var J=o(84828);let O=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[m.ez,N,r.IR,T.sL,b.PV,u.HQ,C.JF,c.Qp,d.U5,g.u5,g.UX,f.Jb,R.o7,J.we]]}),t})()}}]);