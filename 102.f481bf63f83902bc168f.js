"use strict";(self.webpackChunksmartlocker_workspace=self.webpackChunksmartlocker_workspace||[]).push([[102],{74102:(w,L,i)=>{i.r(L),i.d(L,{SetPointsModule:()=>D});var d=i(38583),z=i(39895),l=i(34100),C=i(20597),b=i(23815),t=i(37716),f=i(79765),T=i(91841);let k=(()=>{class n{constructor(o){this.http=o,this.editLocation$=new f.xQ,this.reloadLocationLocker$=new f.xQ}getAllLocationLocker(o=0,e=10){return this.http.get("smartlocker-locker/api/v1/locker-cabinet-places?page="+o+"&size="+e)}postLocationLocker(o,e){return this.http.post("smartlocker-locker/api/v1/locker-cabinet-places",JSON.stringify({name:o,note:e}))}updateLocationLocker(o,e,r){return this.http.put("smartlocker-locker/api/v1/locker-cabinet-places/"+o,JSON.stringify({id:o,name:e,note:r}))}deleteLocationLocker(o){return this.http.delete("smartlocker-locker/api/v1/locker-cabinet-places/"+o)}editLocation(o){this.editLocation$.next(o)}reloadLocationLocker(){this.reloadLocationLocker$.next()}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(T.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var s=i(3679),h=i(26214),S=i(14453),_=i(29374),A=i(84514),v=i(53599),u=i(43654),m=i(75887),p=i(16704),Z=i(57674);function x(n,a){if(1&n){const o=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td",13),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"button",14),t.NdJ("click",function(){const c=t.CHM(o).$implicit;return t.oxw().onEdit(c)}),t._UZ(7,"i",15),t.qZA(),t.TgZ(8,"button",16),t.NdJ("click",function(){const c=t.CHM(o).$implicit;return t.oxw().onDelete(c)}),t._UZ(9,"i",17),t.qZA(),t.qZA(),t.qZA()}if(2&n){const o=a.$implicit,e=a.index;t.xp6(2),t.Oqu(e+1),t.xp6(2),t.Oqu(o.name)}}function P(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const o=t.oxw(2);t.xp6(1),t.hij("T\u1ed5ng ",o.total," b\u1ea3n ghi")}}function E(n,a){if(1&n&&t.YNc(0,P,2,1,"span",18),2&n){const o=t.oxw();t.Q6J("ngIf",o.total)}}function F(n,a){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"form",19),t.NdJ("ngSubmit",function(){return t.CHM(o),t.oxw().submitLocation()}),t.TgZ(2,"nz-form-item"),t.TgZ(3,"nz-form-label",20),t.TgZ(4,"span"),t._uU(5,"V\u1ecb tr\xed Locker"),t.qZA(),t.qZA(),t.TgZ(6,"nz-form-control",21),t._UZ(7,"input",22),t.qZA(),t.qZA(),t.TgZ(8,"nz-form-item"),t.TgZ(9,"nz-form-label",23),t.TgZ(10,"span"),t._uU(11,"Ghi ch\xfa"),t.qZA(),t.qZA(),t.TgZ(12,"nz-form-control",24),t._UZ(13,"textarea",25),t.qZA(),t.qZA(),t._UZ(14,"button",26),t.qZA(),t.BQk()}if(2&n){const o=t.oxw();t.xp6(1),t.Q6J("formGroup",o.createLocationForm),t.xp6(2),t.Q6J("nzSm",6)("nzXs",24),t.xp6(3),t.Q6J("nzSm",14)("nzXs",24),t.xp6(3),t.Q6J("nzSm",6)("nzXs",24),t.xp6(3),t.Q6J("nzSm",14)("nzXs",24)}}function y(n,a){if(1&n){const o=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",27),t.NdJ("click",function(){return t.CHM(o),t.oxw().submitLocation()}),t._uU(2),t.qZA(),t.TgZ(3,"button",28),t.NdJ("click",function(){return t.CHM(o),t.oxw().cancelModal()}),t._uU(4,"H\u1ee7y"),t.qZA(),t.qZA()}if(2&n){const o=t.oxw();t.xp6(1),t.Q6J("nzLoading",o.submitting),t.xp6(1),t.hij(" ",o.editLocation?"C\u1eadp nh\u1eadt v\u1ecb tr\xed Locker":"T\u1ea1o v\u1ecb tr\xed Locker"," ")}}const N=[{path:"",component:(()=>{class n{constructor(o,e,r,c){this.baseService=o,this.setPointService=e,this.fb=r,this.modal=c,this.showCreateLocation=!1,this.editLocation=!1,this.submitting=!1,this.listLocationLocker=[],this.filterLocation={pageSize:10,pageNumber:1},this.objLocation={id:null,name:null,note:null},this.getAllLockerlocationCategory(),this.setPointService.reloadLocationLocker$.subscribe(g=>{this.getAllLockerlocationCategory()}),this.setPointService.editLocation$.subscribe(g=>{this.editLocationLocker(g)})}ngOnInit(){this.createLocationForm=this.fb.group({locationName:[null],note:[null]})}onPageChange(o){this.filterLocation.pageNumber=o,this.getAllLockerlocationCategory()}onEdit(o){this.setPointService.editLocation(o)}onDelete(o){this.modal.confirm({nzTitle:`<i>B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a v\u1ecb tr\xed Locker ${o.name} n\xe0y kh\xf4ng?</i>`,nzOnOk:()=>{this.baseService.showLoading(!0),this.setPointService.deleteLocationLocker(o.id).subscribe(e=>{this.baseService.showLoading(!1),0===e.error&&(this.baseService.showToast("X\xf3a v\u1ecb tr\xed Locker th\xe0nh c\xf4ng",l.gT.TOAST_OK),this.getAllLockerlocationCategory())},()=>{this.baseService.showLoading(!1)})},nzClosable:!1,nzCancelText:"T\xf4i kh\xf4ng mu\u1ed1n",nzOkText:"\u0110\u1ed3ng \xfd"})}getAllLockerlocationCategory(){this.baseService.showLoading(!0),this.setPointService.getAllLocationLocker(this.filterLocation.pageNumber-1,this.filterLocation.pageSize).subscribe(o=>{this.baseService.showLoading(!1),o&&o.data.data&&(this.listLocationLocker=[],b.each(o.data.data,e=>{const r=new C.A(e);this.listLocationLocker.push(r)}),this.total=o.data.total)},o=>{console.log("Kh\xf4ng g\u1eedi \u0111\u01b0\u1ee3c y\xeau c\u1ea7u l\u1ea5y th\xf4ng tin",o)})}createLocationLocker(){this.showCreateLocation=!0,this.editLocation=!1,this.createLocationForm.controls.locationName.setValue(null),this.createLocationForm.controls.note.setValue(null)}editLocationLocker(o){this.showCreateLocation=!0,this.editLocation=!0,this.id=o.id,this.createLocationForm.controls.locationName.setValue(o.name),this.createLocationForm.controls.note.setValue(o.note)}submitLocation(){for(const o in this.createLocationForm.controls)this.createLocationForm.controls.hasOwnProperty(o)&&(this.createLocationForm.controls[o].markAsDirty(),this.createLocationForm.controls[o].updateValueAndValidity());this.createLocationForm.invalid||(this.editLocation?(this.submitting=!0,this.setPointService.updateLocationLocker(this.id,this.createLocationForm.controls.locationName.value,this.createLocationForm.controls.note.value).subscribe(o=>{this.submitting=!1,0===o.error?(this.baseService.showToast("C\u1eadp nh\u1eadt v\u1ecb tr\xed Locker th\xe0nh c\xf4ng",l.gT.TOAST_OK),this.cancelModal(),this.setPointService.reloadLocationLocker()):this.baseService.showToast("C\u1eadp nh\u1eadt v\u1ecb tr\xed Locker kh\xf4ng th\xe0nh c\xf4ng",l.gT.TOAST_ERROR)},o=>{this.submitting=!1})):(this.submitting=!0,this.setPointService.postLocationLocker(this.createLocationForm.controls.locationName.value,this.createLocationForm.controls.note.value).subscribe(o=>{this.submitting=!1,0===o.error?(this.baseService.showToast("T\u1ea1o v\u1ecb tr\xed Locker th\xe0nh c\xf4ng",l.gT.TOAST_OK),this.cancelModal(),this.setPointService.reloadLocationLocker()):this.baseService.showToast("T\u1ea1o v\u1ecb tr\xed Locker kh\xf4ng th\xe0nh c\xf4ng",l.gT.TOAST_ERROR)},o=>{this.submitting=!1})))}cancelModal(){this.showCreateLocation=!1}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(l.bQ),t.Y36(k),t.Y36(s.qu),t.Y36(h.Sf))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cms-set-points"]],decls:23,vars:10,consts:[["title","Qu\u1ea3n l\xfd v\u1ecb tr\xed",3,"close"],["action",""],["nz-button","","nzType","primary",1,"mr-3",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[1,"d-none","d-md-inline-block"],["content","",1,"mt-8"],[1,"mt-11",3,"nzData","nzFrontPagination","nzPageSize","nzPageIndex","nzTotal","nzFooter","nzPageIndexChange"],["nzWidth","160px"],[4,"ngFor","ngForOf"],["footer",""],["nzTitle","T\u1ea1o m\u1edbi v\u1ecb tr\xed Locker",2,"width","500px !important",3,"nzVisible","nzClosable","nzVisibleChange"],[4,"nzModalContent"],[4,"nzModalFooter"],[1,"text-bold"],["nz-button","","nzType","text","title","S\u1eeda",1,"mr-1",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-button","","nzType","text","title","X\xf3a",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline",1,"text-danger"],[4,"ngIf"],["nz-form","",3,"formGroup","ngSubmit"],["nzFor","locationName",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp v\u1ecb tr\xed locker!",3,"nzSm","nzXs"],["nz-input","","id","locationName","formControlName","locationName","placeholder","Nh\u1eadp v\u1ecb tr\xed Locker"],["nzFor","note",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["nz-input","","id","note","formControlName","note","placeholder","Ghi ch\xfa"],[1,"d-none"],["nz-button","","nzType","primary",1,"m-2",3,"nzLoading","click"],["nz-button","","nzType","default",3,"click"]],template:function(o,e){if(1&o&&(t.TgZ(0,"cms-page",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return e.createLocationLocker()}),t._UZ(3,"i",3),t.TgZ(4,"span",4),t._uU(5,"T\u1ea1o v\u1ecb tr\xed Locker"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"nz-table",6),t.NdJ("nzPageIndexChange",function(c){return e.onPageChange(c)}),t.TgZ(8,"thead"),t.TgZ(9,"tr"),t.TgZ(10,"th"),t._uU(11,"M\xe3"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"V\u1ecb tr\xed locker"),t.qZA(),t.TgZ(14,"th",7),t._uU(15,"H\xe0nh \u0111\u1ed9ng"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"tbody"),t.YNc(17,x,10,2,"tr",8),t.qZA(),t.YNc(18,E,1,1,"ng-template",null,9,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"nz-modal",10),t.NdJ("nzVisibleChange",function(c){return e.showCreateLocation=c}),t.YNc(21,F,15,9,"ng-container",11),t.YNc(22,y,5,2,"div",12),t.qZA()),2&o){const r=t.MAs(19);t.Q6J("close",!1),t.xp6(7),t.Q6J("nzData",e.listLocationLocker)("nzFrontPagination",!1)("nzPageSize",e.filterLocation.pageSize)("nzPageIndex",e.filterLocation.pageNumber)("nzTotal",e.total)("nzFooter",r),t.xp6(10),t.Q6J("ngForOf",e.listLocationLocker),t.xp6(3),t.Q6J("nzVisible",e.showCreateLocation)("nzClosable",!1)}},directives:[l.Zd,S.ix,_.dQ,A.w,v.Ls,u.N8,u.Om,u.$Z,u.Uo,u._C,u.p0,d.sg,h.du,h.Hf,h.Uh,d.O5,s._Y,s.JL,m.Lr,s.sg,p.SK,m.Nx,p.t3,m.iK,m.Fd,Z.Zp,s.Fj,s.JJ,s.u],styles:[""]}),n})()}];let J=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[z.Bz.forChild(N)],z.Bz]}),n})();var O=i(84828);let D=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,J,l.IR,S.sL,v.PV,u.HQ,T.JF,h.Qp,m.U5,s.u5,s.UX,p.Jb,Z.o7,O.we]]}),n})()}}]);