"use strict";(self.webpackChunksmartlocker_workspace=self.webpackChunksmartlocker_workspace||[]).push([[724],{41724:(pn,X,l)=>{l.r(X),l.d(X,{TasksModule:()=>cn});var p=l(38583),M=l(39895),a=l(3679),d=l(34100);class H{constructor(o){this.parse(o)}parse(o){this.id=o.id,this.downloadUrl=o.downloadUrl,this.fileName=o.fileName,this.timestamp=o.timestamp,this.fileSize=o.fileSize}}class ut{constructor(o){this.parse(o)}parse(o){this.assignee=o.assignee,this.createdDate=o.createdDate,this.createdUser=o.createdUser,this.deadline=o.deadline,this.description=o.description,this.endDate=o.endDate,this.id=o.id,this.previousTaskId=o.previousTaskId,this.startDate=o.startDate,this.status=o.status,this.ticket=o.ticket,this.title=o.title,this.type=o.type}}class P{constructor(o){this.parse(o)}parse(o){this.createdBy=o.createdBy,this.createdDate=o.createdDate,this.id=o.id,this.note=o.note,this.status=o.status,this.title=o.title}}const O=[{value:1,text:"Nh\u1eadp kho"},{value:2,text:"Xu\u1ea5t kho"},{value:3,text:"Ho\xe0n h\xe0ng"},{value:4,text:"Chuy\u1ec3n kho"},{value:5,text:"S\u1eeda ch\u1eefa"},{value:6,text:"B\u1ea3o tr\xec"}];var t=l(37716),m=l(26214),N=l(79765),$=l(26215),K=l(91841);let F=(()=>{class n{constructor(e){this.http=e,this.reloadItemList$=new N.xQ,this.task=new $.X(null),this.castTask=this.task.asObservable(),this.status=new $.X(!1),this.castStatus=this.status.asObservable()}getAllTicket(e=0,i=10,r=!1,s,c,u,v,k){let g="smartlocker-ticket/api/v1/tickets/filter?page="+e+"&size="+i+"&myTask="+r;return s>0&&(g=g.concat("&status="+s)),c&&(g=g.concat("&id.equals="+c)),u&&(g=g.concat("&confirmBy.equals="+u)),v&&(g=g.concat("&confirmDate.greaterThan=",v)),k&&(g=g.concat("&confirmDate.lessThan=",k)),this.http.get(g)}createTicket(e,i,r,s,c,u,v){return this.http.post("smartlocker-ticket/api/v1/tickets",JSON.stringify({assignee:r,createdDate:c,createdUser:s,taskTitle:i,taskType:u,ticketTitle:e,deadline:v}))}getReceiver(e=0,i=10,r){return this.http.get("smartlocker/api/v1/users/search?search="+r)}getDetailTickets(e){return this.http.get("smartlocker-ticket/api/v1/tickets/"+e)}reloadItem(){this.reloadItemList$.next()}getAllTaskByTicket(e){return this.http.get("smartlocker-ticket/api/v1/tasks/get-all-by-ticket?ticketId="+e)}getDetailTaskByTicket(e){return this.http.get("smartlocker-ticket/api/v1/tasks/"+e)}getAllFileByTicket(e){return this.http.get("smartlocker-ticket/api/v1/tickets/"+e+"/get-files")}getDataRatingByTask(e){return this.http.get("smartlocker-ticket/api/v1/task-ratings/find-by-task?taskId="+e)}updateTittleTicket(e,i){return this.http.patch("smartlocker-ticket/api/v1/tickets/"+e,JSON.stringify({id:e,title:i}))}createRating(e,i,r,s,c){return this.http.post("smartlocker-ticket/api/v1/task-ratings",JSON.stringify({rate:e,rateBy:{id:i},task:{id:r},note:s,timestamp:c}))}updateRating(e,i,r,s,c){return this.http.patch("smartlocker-ticket/api/v1/task-ratings/"+e,JSON.stringify({id:e,rate:i,rateBy:{id:r},note:s,timestamp:c}))}updateTask(e,i,r,s,c){return this.http.patch("smartlocker-ticket/api/v1/tasks/"+e,JSON.stringify({assignee:{id:r},deadline:s,note:c,id:e,title:i}))}editTask(e){this.task.next(e)}createTask(e,i,r,s,c,u,v,k){return this.http.post("smartlocker-ticket/api/v1/tasks/action",JSON.stringify({status:1,newTask:!0,taskId:e,updateDate:i,userId:r,nTitle:s,nDeadline:c,nAssignee:u,nType:v,note:k}))}forwardStatus(e,i,r){return this.http.patch("smartlocker-ticket/api/v1/tasks/"+e,JSON.stringify({id:e,status:i,note:r}))}forwardTask(e,i,r,s,c,u,v,k,g){return this.http.post("smartlocker-ticket/api/v1/tasks/action",JSON.stringify({status:g,newTask:!0,taskId:e,updateDate:i,userId:r,nTitle:s,nDeadline:c,nAssignee:u,nType:v,note:k}))}statusCurrent(e){this.status.next(e)}showFile(e){return this.http.get("smartlocker-ticket/api/v1/tasks/"+e+"/get-files")}addFileOfTask(e,i){const r=new FormData;return i.forEach(s=>{r.append("files",s)}),this.http.post("smartlocker-ticket/api/v1/tasks/"+e+"/upload-files",r)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(K.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var h=l(75887),z=l(16704),C=l(57674),j=l(52079),y=l(87966),Z=l(80269),x=l(25716),b=l(82677),E=l(14453),D=l(29374),q=l(84514);function pt(n,o){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.complete?"Ho\xe0n Th\xe0nh":"H\u1ee7y"," ")}}function ht(n,o){1&n&&(t.TgZ(0,"nz-form-item"),t.TgZ(1,"nz-form-label",10),t.TgZ(2,"span"),t._uU(3,"Deadline"),t.qZA(),t.qZA(),t.TgZ(4,"nz-form-control",11),t._UZ(5,"nz-date-picker",12),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24))}function mt(n,o){if(1&n&&t._UZ(0,"nz-option",18),2&n){const e=o.$implicit;t.Q6J("nzLabel",e.text)("nzValue",e.value)}}function dt(n,o){1&n&&t._UZ(0,"nz-spin")}function gt(n,o){if(1&n&&t.YNc(0,dt,1,0,"nz-spin",8),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.isLoading)}}function _t(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"nz-form-item"),t.TgZ(1,"nz-form-label",13),t.TgZ(2,"span"),t._uU(3,"Ng\u01b0\u1eddi nh\u1eadn"),t.qZA(),t.qZA(),t.TgZ(4,"nz-form-control",14),t.TgZ(5,"nz-select",15),t.NdJ("nzScrollToBottom",function(){return t.CHM(e),t.oxw().loadMore()})("nzOnSearch",function(r){return t.CHM(e),t.oxw().search(r)}),t.YNc(6,mt,1,2,"nz-option",16),t.qZA(),t.YNc(7,gt,1,1,"ng-template",null,17,t.W1O),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(8),i=t.oxw();t.xp6(1),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(1),t.Q6J("nzShowArrow",!1)("nzDropdownRender",e)("nzFilterOption",i.nzFilterOption),t.xp6(1),t.Q6J("ngForOf",i.listOfOption)}}function zt(n,o){1&n&&(t.TgZ(0,"nz-form-item"),t.TgZ(1,"nz-form-label",19),t.TgZ(2,"span"),t._uU(3,"N\u1ed9i dung"),t.qZA(),t.qZA(),t.TgZ(4,"nz-form-control",3),t._UZ(5,"input",20),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24))}function ft(n,o){if(1&n&&t._UZ(0,"nz-option",18),2&n){const e=o.$implicit;t.Q6J("nzLabel",e.text)("nzValue",e.value)}}function Tt(n,o){if(1&n&&(t.TgZ(0,"nz-form-item"),t.TgZ(1,"nz-form-label",21),t.TgZ(2,"span",22),t._uU(3,"Type"),t.qZA(),t.qZA(),t.TgZ(4,"nz-form-control",23),t.TgZ(5,"nz-select",24),t.YNc(6,ft,1,2,"nz-option",16),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(2),t.Q6J("ngForOf",e.listOfType)}}function Ct(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw().submitContent()}),t._uU(2," C\u1eadp nh\u1eadt "),t.qZA(),t.TgZ(3,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancelContent()}),t._uU(4,"H\u1ee7y"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("nzLoading",e.editSubmitting)}}let G=(()=>{class n{constructor(e,i,r,s){this.fb=e,this.modalRef=i,this.ticketService=r,this.baseService=s,this.editSubmitting=!1,this.forward=!1,this.listOfOption=[],this.page=0,this.size=10,this.totalReceiver=0,this.listOfType=O,this.isLoading=!1,this.nzFilterOption=()=>!0,this.ticketService.castTask.subscribe(c=>this.task=c),this.ticketService.castStatus.subscribe(c=>this.complete=c)}ngOnInit(){this.editContentForm=this.fb.group({note:[null,[a.kI.required]],checked:[!1],deadline:[null],receiver:[null],type:[null],content:[null]}),this.editContentForm.controls.checked.setValue(!1)}submitContent(){this.datenow=new Date;for(const e in this.editContentForm.controls)this.editContentForm.controls.hasOwnProperty(e)&&(this.editContentForm.controls[e].markAsDirty(),this.editContentForm.controls[e].updateValueAndValidity());this.status=this.complete?2:3,this.editContentForm.controls.checked.value?this.ticketService.forwardTask(this.task.id,this.datenow.toISOString(),this.importerId,this.editContentForm.controls.content.value,this.editContentForm.controls.deadline.value.toISOString(),this.editContentForm.controls.receiver.value,this.editContentForm.controls.type.value,this.editContentForm.controls.note.value,this.status).subscribe(e=>{if(0==e.error){this.baseService.showToast("Chuy\u1ec3n tr\u1ea1ng th\xe1i v\xe0 chuy\u1ec3n ti\u1ebfp task th\xe0nh c\xf4ng",d.gT.TOAST_OK);const i=new CustomEvent("EditTask");window.dispatchEvent(i),this.cancelContent()}},e=>{console.log("kh\u01a1i tao th\u1ea5t b\u1ea1i",e)}):this.ticketService.forwardStatus(this.task.id,this.status,this.editContentForm.controls.note.value).subscribe(e=>{if(0==e.error){this.baseService.showToast("Chuy\u1ec3n tr\u1ea1ng th\xe1i task th\xe0nh c\xf4ng");const i=new CustomEvent("EditTask");window.dispatchEvent(i),this.cancelContent()}})}cancelContent(){this.modalRef.destroy()}changeStatus(e){this.forward=!!e}getUserCurrent(){this.currentUser=this.baseService.getCachedUser(),this.importerId=this.currentUser.id}search(e){this.page=0,this.size=10,this.keyreceiver=e,this.getReceiver()}loadMore(){this.totalReceiver>this.listOfOption.length&&(this.isLoading=!0,this.page=this.page+1,this.getReceiver())}getReceiver(){this.ticketService.getReceiver(this.page,this.size,this.keyreceiver).subscribe(e=>{0==e.error&&(console.log(e),this.responseProcessReceiver(e))},e=>{console.log("kh\xf4ng g\u1eedi \u0111\u01b0\u1ee3c request t\u1ea1o m\u1edbi",e)})}responseProcessReceiver(e){this.totalReceiver=e.data.total,this.listOfOption=[],e.data.data.forEach(i=>{this.listOfOption.push({value:i.id,text:i.lastName.concat(" ",i.firstName)})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.qu),t.Y36(m.Lf),t.Y36(F),t.Y36(d.bQ))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cms-complete-cancel-forward"]],decls:20,vars:14,consts:[[4,"nzModalTitle"],["nz-form","",1,"px-3",3,"formGroup","nzLayout","ngSubmit"],["nzFor","note","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp n\u1ed9i dung!",3,"nzSm","nzXs"],[3,"nzMaxCharacterCount"],["rows","4","formControlName","note","nz-input",""],[3,"nzSm","nzXs"],["nz-checkbox","","formControlName","checked",3,"ngModelChange"],[4,"ngIf"],[4,"nzModalFooter"],["nzFor","deadline","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng ch\u1ecdn ng\xe0y!",3,"nzSm","nzXs"],["formControlName","deadline","nzPlaceHolder","Ch\u1ecdn ng\xe0y",2,"width","100%"],["nzFor","receiver","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng ch\u1ecdn t\xean ng\u01b0\u1eddi nh\u1eadn!",3,"nzSm","nzXs"],["nzShowSearch","","nzServerSearch","","nzPlaceHolder","Nh\u1eadp t\xean ng\u01b0\u1eddi nh\u1eadn","formControlName","receiver",3,"nzShowArrow","nzDropdownRender","nzFilterOption","nzScrollToBottom","nzOnSearch"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["renderTemplate",""],[3,"nzLabel","nzValue"],["nzFor","content","nzRequired","",3,"nzSm","nzXs"],["nz-input","","id","content","formControlName","content","placeholder","Nh\u1eadp n\u1ed9i dung",1,"pl-3"],["nzFor","category","nzRequired","",3,"nzSm","nzXs"],["nz-typography",""],["nzErrorTip","Vui l\xf2ng ch\u1ecdn type!",3,"nzSm","nzXs"],["formControlName","type","nzPlaceHolder","Ch\u1ecdn lo\u1ea1i c\xf4ng vi\u1ec7c"],["nz-button","","nzType","primary",1,"m-2",3,"nzLoading","click"],["nz-button","","nzType","default",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div"),t.YNc(1,pt,2,1,"div",0),t.TgZ(2,"div"),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return i.submitContent()}),t.TgZ(4,"nz-form-item"),t.TgZ(5,"nz-form-label",2),t.TgZ(6,"span"),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"nz-form-control",3),t.TgZ(9,"nz-textarea-count",4),t._UZ(10,"textarea",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"nz-form-item"),t.TgZ(12,"nz-form-control",6),t.TgZ(13,"label",7),t.NdJ("ngModelChange",function(s){return i.changeStatus(s)}),t._uU(14," Chuy\u1ec3n ti\u1ebfp"),t.qZA(),t.qZA(),t.qZA(),t.YNc(15,ht,6,4,"nz-form-item",8),t.YNc(16,_t,9,8,"nz-form-item",8),t.YNc(17,zt,6,4,"nz-form-item",8),t.YNc(18,Tt,7,5,"nz-form-item",8),t.qZA(),t.qZA(),t.YNc(19,Ct,5,1,"div",9),t.qZA()),2&e&&(t.xp6(3),t.Q6J("formGroup",i.editContentForm)("nzLayout","vertical"),t.xp6(2),t.Q6J("nzSm",22)("nzXs",24),t.xp6(2),t.Oqu(i.complete?"Ghi ch\xfa":"L\xed do"),t.xp6(1),t.Q6J("nzSm",24)("nzXs",24),t.xp6(1),t.Q6J("nzMaxCharacterCount",100),t.xp6(3),t.Q6J("nzSm",19)("nzXs",19),t.xp6(3),t.Q6J("ngIf",i.forward),t.xp6(1),t.Q6J("ngIf",i.forward),t.xp6(1),t.Q6J("ngIf",i.forward),t.xp6(1),t.Q6J("ngIf",i.forward))},directives:[m.h1,a._Y,a.JL,h.Lr,a.sg,z.SK,h.Nx,z.t3,h.iK,h.Fd,C.w,a.Fj,C.Zp,a.JJ,a.u,j.Ie,p.O5,m.Uh,y.uw,Z.Vq,p.sg,Z.Ip,x.W,b.ZU,E.ix,D.dQ,q.w],styles:[""]}),n})();function Zt(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1,"Chuy\u1ec3n ti\u1ebfp"),t.qZA())}function vt(n,o){if(1&n&&t._UZ(0,"nz-option",21),2&n){const e=o.$implicit;t.Q6J("nzLabel",e.text)("nzValue",e.value)}}function kt(n,o){1&n&&t._UZ(0,"nz-spin")}function At(n,o){if(1&n&&t.YNc(0,kt,1,0,"nz-spin",22),2&n){const e=t.oxw();t.Q6J("ngIf",e.isLoading)}}function yt(n,o){if(1&n&&t._UZ(0,"nz-option",21),2&n){const e=o.$implicit;t.Q6J("nzLabel",e.text)("nzValue",e.value)}}function xt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().submitContent()}),t._uU(2," C\u1eadp nh\u1eadt "),t.qZA(),t.TgZ(3,"button",24),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancelContent()}),t._uU(4,"H\u1ee7y"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("nzLoading",e.createSubmitting)}}let Et=(()=>{class n{constructor(e,i,r,s){this.fb=e,this.modalRef=i,this.ticketService=r,this.baseService=s,this.createSubmitting=!1,this.listOfOption=[],this.page=0,this.size=10,this.totalReceiver=0,this.listOfType=O,this.isLoading=!1,this.nzFilterOption=()=>!0,this.ticketService.castTask.subscribe(c=>this.task=c)}ngOnInit(){this.createContentForm=this.fb.group({content:[null,[a.kI.required]],deadline:[null,[a.kI.required]],receiver:[null,[a.kI.required]],type:[null,[a.kI.required]],description:[null]}),this.page=1,this.size=10,this.getUserCurrent()}getUserCurrent(){this.currentUser=this.baseService.getCachedUser(),this.importerId=this.currentUser.id}search(e){this.page=0,this.size=10,this.keyreceiver=e,this.getReceiver()}loadMore(){this.totalReceiver>this.listOfOption.length&&(this.isLoading=!0,this.page=this.page+1,this.getReceiver())}getReceiver(){this.ticketService.getReceiver(this.page,this.size,this.keyreceiver).subscribe(e=>{0==e.error&&(console.log(e),this.responseProcessReceiver(e))},e=>{console.log("kh\xf4ng g\u1eedi \u0111\u01b0\u1ee3c request t\u1ea1o m\u1edbi",e)})}responseProcessReceiver(e){this.totalReceiver=e.data.total,this.listOfOption=[],e.data.data.forEach(i=>{this.listOfOption.push({value:i.id,text:i.lastName.concat(" ",i.firstName)})})}submitContent(){for(const e in this.createContentForm.controls)this.createContentForm.controls.hasOwnProperty(e)&&(this.createContentForm.controls[e].markAsDirty(),this.createContentForm.controls[e].updateValueAndValidity());this.datenow=new Date,this.createContentForm.invalid||this.ticketService.forwardTask(this.task.id,this.datenow.toISOString(),this.importerId,this.createContentForm.controls.content.value,this.createContentForm.controls.deadline.value.toISOString(),this.createContentForm.controls.receiver.value,this.createContentForm.controls.type.value,this.createContentForm.controls.description.value,this.task.status).subscribe(e=>{if(0==e.error){this.baseService.showToast("Kh\u1edfi t\u1ea1o th\xe0nh c\xf4ng task m\u1edbi",d.gT.TOAST_OK);const i=new CustomEvent("EditTask");window.dispatchEvent(i),this.cancelContent()}},e=>{console.log("kh\u01a1i tao th\u1ea5t b\u1ea1i",e)})}cancelContent(){this.modalRef.destroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.qu),t.Y36(m.Lf),t.Y36(F),t.Y36(d.bQ))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cms-create-task"]],decls:39,vars:27,consts:[[4,"nzModalTitle"],["nz-form","",1,"px-3",3,"formGroup","nzLayout","ngSubmit"],["nzFor","content","nzRequired","",3,"nzSm","nzXs"],["nz-typography",""],["nzErrorTip","Vui l\xf2ng nh\u1eadp n\u1ed9i dung!",3,"nzSm","nzXs"],["nz-input","","id","content","formControlName","content","placeholder","Nh\u1eadp n\u1ed9i dung",1,"pl-3"],["nzFor","deadline","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng ch\u1ecdn ng\xe0y!",3,"nzSm","nzXs"],["nzPlaceHolder","Ch\u1ecdn ng\xe0y","formControlName","deadline",2,"width","100%"],["nzFor","receiver","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng ch\u1ecdn t\xean ng\u01b0\u1eddi nh\u1eadn!",3,"nzSm","nzXs"],["nzShowSearch","","nzServerSearch","","nzPlaceHolder","Nh\u1eadp t\xean ng\u01b0\u1eddi nh\u1eadn","formControlName","receiver",3,"nzShowArrow","nzDropdownRender","nzFilterOption","nzScrollToBottom","nzOnSearch"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["renderTemplate",""],["nzFor","category","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng ch\u1ecdn type!",3,"nzSm","nzXs"],["formControlName","type","nzPlaceHolder","Ch\u1ecdn lo\u1ea1i c\xf4ng vi\u1ec7c"],["nzFor","description",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1!",3,"nzSm","nzXs"],["nz-input","","id","description","formControlName","description","placeholder","description",1,"pl-3"],[4,"nzModalFooter"],[3,"nzLabel","nzValue"],[4,"ngIf"],["nz-button","","nzType","primary",1,"m-2",3,"nzLoading","click"],["nz-button","","nzType","default",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Zt,2,0,"div",0),t.TgZ(2,"div"),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return i.submitContent()}),t.TgZ(4,"nz-form-item"),t.TgZ(5,"nz-form-label",2),t.TgZ(6,"span",3),t._uU(7,"N\u1ed9i dung"),t.qZA(),t.qZA(),t.TgZ(8,"nz-form-control",4),t._UZ(9,"input",5),t.qZA(),t.qZA(),t.TgZ(10,"nz-form-item"),t.TgZ(11,"nz-form-label",6),t.TgZ(12,"span",3),t._uU(13,"Deadline"),t.qZA(),t.qZA(),t.TgZ(14,"nz-form-control",7),t._UZ(15,"nz-date-picker",8),t.qZA(),t.qZA(),t.TgZ(16,"nz-form-item"),t.TgZ(17,"nz-form-label",9),t.TgZ(18,"span",3),t._uU(19,"Ng\u01b0\u1eddi nh\u1eadn"),t.qZA(),t.qZA(),t.TgZ(20,"nz-form-control",10),t.TgZ(21,"nz-select",11),t.NdJ("nzScrollToBottom",function(){return i.loadMore()})("nzOnSearch",function(s){return i.search(s)}),t.YNc(22,vt,1,2,"nz-option",12),t.qZA(),t.YNc(23,At,1,1,"ng-template",null,13,t.W1O),t.qZA(),t.qZA(),t.TgZ(25,"nz-form-item"),t.TgZ(26,"nz-form-label",14),t.TgZ(27,"span",3),t._uU(28,"Type"),t.qZA(),t.qZA(),t.TgZ(29,"nz-form-control",15),t.TgZ(30,"nz-select",16),t.YNc(31,yt,1,2,"nz-option",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"nz-form-item"),t.TgZ(33,"nz-form-label",17),t.TgZ(34,"span",3),t._uU(35,"Ghi ch\xfa"),t.qZA(),t.qZA(),t.TgZ(36,"nz-form-control",18),t._UZ(37,"input",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(38,xt,5,1,"div",20),t.qZA()),2&e){const r=t.MAs(24);t.xp6(3),t.Q6J("formGroup",i.createContentForm)("nzLayout","vertical"),t.xp6(2),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(3),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(3),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(1),t.Q6J("nzShowArrow",!1)("nzDropdownRender",r)("nzFilterOption",i.nzFilterOption),t.xp6(1),t.Q6J("ngForOf",i.listOfOption),t.xp6(4),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(2),t.Q6J("ngForOf",i.listOfType),t.xp6(2),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24)}},directives:[m.h1,a._Y,a.JL,h.Lr,a.sg,z.SK,h.Nx,z.t3,h.iK,b.ZU,h.Fd,C.Zp,a.Fj,a.JJ,a.u,y.uw,Z.Vq,p.sg,m.Uh,Z.Ip,p.O5,x.W,E.ix,D.dQ,q.w],styles:[""]}),n})();function wt(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1,"Ch\u1ec9nh s\u1eeda n\u1ed9i dung"),t.qZA())}function St(n,o){if(1&n&&t._UZ(0,"nz-option",18),2&n){const e=o.$implicit;t.Q6J("nzLabel",e.text)("nzValue",e.value)}}function Ft(n,o){1&n&&t._UZ(0,"nz-spin")}function bt(n,o){if(1&n&&t.YNc(0,Ft,1,0,"nz-spin",19),2&n){const e=t.oxw();t.Q6J("ngIf",e.isLoading)}}function Dt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().submitContent()}),t._uU(2," C\u1eadp nh\u1eadt "),t.qZA(),t.TgZ(3,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancelContent()}),t._uU(4,"H\u1ee7y"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("nzLoading",e.editSubmitting)}}let qt=(()=>{class n{constructor(e,i,r,s){this.fb=e,this.modalRef=i,this.ticketService=r,this.baseService=s,this.editSubmitting=!1,this.listOfOption=[],this.page=0,this.size=10,this.totalReceiver=0,this.listOfType=O,this.isLoading=!1,this.nzFilterOption=()=>!0,this.ticketService.castTask.subscribe(c=>this.task=c)}ngOnInit(){this.editContentForm=this.fb.group({content:[null,[a.kI.required]],deadline:[null,[a.kI.required]],receiver:[null,[a.kI.required]],description:[null]}),this.editContentForm.controls.content.setValue(this.task.title),this.editContentForm.controls.receiver.setValue(this.task.assignee.id),this.editContentForm.controls.deadline.setValue(this.task.deadline),this.editContentForm.controls.description.setValue(this.task.description)}showEditContent(){}getUserCurrent(){this.currentUser=this.baseService.getCachedUser(),this.importerId=this.currentUser.id}search(e){this.page=0,this.size=10,this.keyreceiver=e,this.getReceiver()}loadMore(){this.totalReceiver>this.listOfOption.length&&(this.isLoading=!0,this.page=this.page+1,this.getReceiver())}getReceiver(){this.ticketService.getReceiver(this.page,this.size,this.keyreceiver).subscribe(e=>{0==e.error&&(console.log(e),this.responseProcessReceiver(e))},e=>{console.log("kh\xf4ng g\u1eedi \u0111\u01b0\u1ee3c request t\u1ea1o m\u1edbi",e)})}responseProcessReceiver(e){this.totalReceiver=e.data.total,this.listOfOption=[],e.data.data.forEach(i=>{this.listOfOption.push({value:i.id,text:i.lastName.concat(" ",i.firstName)})})}submitContent(){for(const e in this.editContentForm.controls)this.editContentForm.controls.hasOwnProperty(e)&&(this.editContentForm.controls[e].markAsDirty(),this.editContentForm.controls[e].updateValueAndValidity());this.datenow=new Date,this.editContentForm.invalid||this.ticketService.updateTask(this.task.id,this.editContentForm.controls.content.value,this.editContentForm.controls.receiver.value,this.editContentForm.controls.deadline.value,this.editContentForm.controls.description.value).subscribe(e=>{if(0==e.error){this.baseService.showToast("Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng task m\u1edbi",d.gT.TOAST_OK);const i=new CustomEvent("EditTask");window.dispatchEvent(i),this.cancelContent()}},e=>{console.log("Ch\u1ec9nh s\u1eeda th\u1ea5t b\u1ea1i",e)})}cancelContent(){this.modalRef.destroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.qu),t.Y36(m.Lf),t.Y36(F),t.Y36(d.bQ))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cms-edit-content"]],decls:33,vars:22,consts:[[4,"nzModalTitle"],["nz-form","",1,"px-3",3,"formGroup","nzLayout","ngSubmit"],["nzFor","content","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp n\u1ed9i dung!",3,"nzSm","nzXs"],["nz-input","","id","content","formControlName","content","placeholder","Nh\u1eadp n\u1ed9i dung",1,"pl-3"],["nzFor","deadline","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng ch\u1ecdn ng\xe0y!",3,"nzSm","nzXs"],["formControlName","deadline","nzPlaceHolder","Ch\u1ecdn ng\xe0y",2,"width","100%"],["nzFor","receiver","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng ch\u1ecdn t\xean ng\u01b0\u1eddi nh\u1eadn!",3,"nzSm","nzXs"],["nzShowSearch","","formControlName","receiver",3,"nzDropdownRender","nzFilterOption","nzScrollToBottom","nzOnSearch"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["renderTemplate",""],["nzFor","description",3,"nzSm","nzXs"],["nzErrorTip","Vui nh\u1eadp ghi ch\xfa!",3,"nzSm","nzXs"],[3,"nzMaxCharacterCount"],["rows","4","formControlName","description","nz-input",""],[4,"nzModalFooter"],[3,"nzLabel","nzValue"],[4,"ngIf"],["nz-button","","nzType","primary",1,"m-2",3,"nzLoading","click"],["nz-button","","nzType","default",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,wt,2,0,"div",0),t.TgZ(2,"div"),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return i.submitContent()}),t.TgZ(4,"nz-form-item"),t.TgZ(5,"nz-form-label",2),t.TgZ(6,"span"),t._uU(7,"N\u1ed9i dung"),t.qZA(),t.qZA(),t.TgZ(8,"nz-form-control",3),t._UZ(9,"input",4),t.qZA(),t.qZA(),t.TgZ(10,"nz-form-item"),t.TgZ(11,"nz-form-label",5),t.TgZ(12,"span"),t._uU(13,"Deadline"),t.qZA(),t.qZA(),t.TgZ(14,"nz-form-control",6),t._UZ(15,"nz-date-picker",7),t.qZA(),t.qZA(),t.TgZ(16,"nz-form-item"),t.TgZ(17,"nz-form-label",8),t.TgZ(18,"span"),t._uU(19,"Ng\u01b0\u1eddi nh\u1eadn"),t.qZA(),t.qZA(),t.TgZ(20,"nz-form-control",9),t.TgZ(21,"nz-select",10),t.NdJ("nzScrollToBottom",function(){return i.loadMore()})("nzOnSearch",function(s){return i.search(s)}),t.YNc(22,St,1,2,"nz-option",11),t.qZA(),t.YNc(23,bt,1,1,"ng-template",null,12,t.W1O),t.qZA(),t.qZA(),t.TgZ(25,"nz-form-item"),t.TgZ(26,"nz-form-label",13),t.TgZ(27,"span"),t._uU(28,"Ghi ch\xfa"),t.qZA(),t.qZA(),t.TgZ(29,"nz-form-control",14),t.TgZ(30,"nz-textarea-count",15),t._UZ(31,"textarea",16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(32,Dt,5,1,"div",17),t.qZA()),2&e){const r=t.MAs(24);t.xp6(3),t.Q6J("formGroup",i.editContentForm)("nzLayout","vertical"),t.xp6(2),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(3),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(3),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(1),t.Q6J("nzDropdownRender",r)("nzFilterOption",i.nzFilterOption),t.xp6(1),t.Q6J("ngForOf",i.listOfOption),t.xp6(4),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(1),t.Q6J("nzMaxCharacterCount",100)}},directives:[m.h1,a._Y,a.JL,h.Lr,a.sg,z.SK,h.Nx,z.t3,h.iK,h.Fd,C.Zp,a.Fj,a.JJ,a.u,y.uw,Z.Vq,p.sg,C.w,m.Uh,Z.Ip,p.O5,x.W,E.ix,D.dQ,q.w],styles:[""]}),n})();var w=l(53599),S=l(12746),I=l(47420),W=l(83385),L=l(34812),tt=l(44788),f=l(64762),Q=l(70946),V=l(36461),R=l(46782),A=l(32729),_=l(96182);const Ot=["ulElement"];function Nt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li",3),t.TgZ(1,"div",4),t.NdJ("itemHover",function(r){const c=t.CHM(e).index;return t.oxw().onItemHover(c,r)})("itemClick",function(r){const c=t.CHM(e).index;return t.oxw().onItemClick(c,r)}),t.qZA(),t.qZA()}if(2&n){const e=o.index,i=t.oxw();t.Q6J("ngClass",i.starStyleArray[e]||"")("nzTooltipTitle",i.nzTooltips[e]),t.xp6(1),t.Q6J("allowHalf",i.nzAllowHalf)("character",i.nzCharacter)("index",e)}}const Rt=["nz-rate-item",""];function Jt(n,o){}function Ut(n,o){}function Mt(n,o){1&n&&t._UZ(0,"i",4)}const et=function(n){return{$implicit:n}};let It=(()=>{class n{constructor(e,i,r,s){this.nzConfigService=e,this.renderer=i,this.cdr=r,this.directionality=s,this._nzModuleName="rate",this.nzAllowClear=!0,this.nzAllowHalf=!1,this.nzDisabled=!1,this.nzAutoFocus=!1,this.nzCount=5,this.nzTooltips=[],this.nzOnBlur=new t.vpe,this.nzOnFocus=new t.vpe,this.nzOnHoverChange=new t.vpe,this.nzOnKeyDown=new t.vpe,this.classMap={},this.starArray=[],this.starStyleArray=[],this.dir="ltr",this.destroy$=new N.xQ,this.hasHalf=!1,this.hoverValue=0,this.isFocused=!1,this._value=0,this.onChange=()=>null,this.onTouched=()=>null}get nzValue(){return this._value}set nzValue(e){this._value!==e&&(this._value=e,this.hasHalf=!Number.isInteger(e),this.hoverValue=Math.ceil(e))}ngOnChanges(e){const{nzAutoFocus:i,nzCount:r,nzValue:s}=e;if(i&&!i.isFirstChange()){const c=this.ulElement.nativeElement;this.nzAutoFocus&&!this.nzDisabled?this.renderer.setAttribute(c,"autofocus","autofocus"):this.renderer.removeAttribute(c,"autofocus")}r&&this.updateStarArray(),s&&this.updateStarStyle()}ngOnInit(){var e;this.nzConfigService.getConfigChangeEventForComponent("rate").pipe((0,R.R)(this.destroy$)).subscribe(()=>this.cdr.markForCheck()),null===(e=this.directionality.change)||void 0===e||e.pipe((0,R.R)(this.destroy$)).subscribe(i=>{this.dir=i,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onItemClick(e,i){if(this.nzDisabled)return;this.hoverValue=e+1;const r=i?e+.5:e+1;this.nzValue===r?this.nzAllowClear&&(this.nzValue=0,this.onChange(this.nzValue)):(this.nzValue=r,this.onChange(this.nzValue)),this.updateStarStyle()}onItemHover(e,i){this.nzDisabled||this.hoverValue===e+1&&i===this.hasHalf||(this.hoverValue=e+1,this.hasHalf=i,this.nzOnHoverChange.emit(this.hoverValue),this.updateStarStyle())}onRateLeave(){this.hasHalf=!Number.isInteger(this.nzValue),this.hoverValue=Math.ceil(this.nzValue),this.updateStarStyle()}onFocus(e){this.isFocused=!0,this.nzOnFocus.emit(e)}onBlur(e){this.isFocused=!1,this.nzOnBlur.emit(e)}focus(){this.ulElement.nativeElement.focus()}blur(){this.ulElement.nativeElement.blur()}onKeyDown(e){const i=this.nzValue;e.keyCode===V.SV&&this.nzValue<this.nzCount?this.nzValue+=this.nzAllowHalf?.5:1:e.keyCode===V.oh&&this.nzValue>0&&(this.nzValue-=this.nzAllowHalf?.5:1),i!==this.nzValue&&(this.onChange(this.nzValue),this.nzOnKeyDown.emit(e),this.updateStarStyle(),this.cdr.markForCheck())}updateStarArray(){this.starArray=Array(this.nzCount).fill(0).map((e,i)=>i),this.updateStarStyle()}updateStarStyle(){this.starStyleArray=this.starArray.map(e=>{const i="ant-rate-star",r=e+1;return{[`${i}-full`]:r<this.hoverValue||!this.hasHalf&&r===this.hoverValue,[`${i}-half`]:this.hasHalf&&r===this.hoverValue,[`${i}-active`]:this.hasHalf&&r===this.hoverValue,[`${i}-zero`]:r>this.hoverValue,[`${i}-focused`]:this.hasHalf&&r===this.hoverValue&&this.isFocused}})}writeValue(e){this.nzValue=e||0,this.updateStarArray(),this.cdr.markForCheck()}setDisabledState(e){this.nzDisabled=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(A.jY),t.Y36(t.Qsj),t.Y36(t.sBO),t.Y36(Q.Is,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["nz-rate"]],viewQuery:function(e,i){if(1&e&&t.Gf(Ot,5),2&e){let r;t.iGM(r=t.CRH())&&(i.ulElement=r.first)}},inputs:{nzAllowClear:"nzAllowClear",nzAllowHalf:"nzAllowHalf",nzDisabled:"nzDisabled",nzAutoFocus:"nzAutoFocus",nzCount:"nzCount",nzTooltips:"nzTooltips",nzCharacter:"nzCharacter"},outputs:{nzOnBlur:"nzOnBlur",nzOnFocus:"nzOnFocus",nzOnHoverChange:"nzOnHoverChange",nzOnKeyDown:"nzOnKeyDown"},exportAs:["nzRate"],features:[t._Bn([{provide:a.JU,useExisting:(0,t.Gpc)(()=>n),multi:!0}]),t.TTD],decls:3,vars:7,consts:[[1,"ant-rate",3,"ngClass","tabindex","blur","focus","keydown","mouseleave"],["ulElement",""],["class","ant-rate-star","nz-tooltip","",3,"ngClass","nzTooltipTitle",4,"ngFor","ngForOf"],["nz-tooltip","",1,"ant-rate-star",3,"ngClass","nzTooltipTitle"],["nz-rate-item","",3,"allowHalf","character","index","itemHover","itemClick"]],template:function(e,i){1&e&&(t.TgZ(0,"ul",0,1),t.NdJ("blur",function(s){return i.onBlur(s)})("focus",function(s){return i.onFocus(s)})("keydown",function(s){return i.onKeyDown(s),s.preventDefault()})("mouseleave",function(s){return i.onRateLeave(),s.stopPropagation()}),t.YNc(2,Nt,2,5,"li",2),t.qZA()),2&e&&(t.ekj("ant-rate-disabled",i.nzDisabled)("ant-rate-rtl","rtl"===i.dir),t.Q6J("ngClass",i.classMap)("tabindex",i.nzDisabled?-1:1),t.xp6(2),t.Q6J("ngForOf",i.starArray))},directives:function(){return[p.mk,p.sg,I.SY,Qt]},encapsulation:2,changeDetection:0}),(0,f.gn)([(0,A.oS)(),(0,_.yF)()],n.prototype,"nzAllowClear",void 0),(0,f.gn)([(0,A.oS)(),(0,_.yF)()],n.prototype,"nzAllowHalf",void 0),(0,f.gn)([(0,_.yF)()],n.prototype,"nzDisabled",void 0),(0,f.gn)([(0,_.yF)()],n.prototype,"nzAutoFocus",void 0),(0,f.gn)([(0,_.Rn)()],n.prototype,"nzCount",void 0),n})(),Qt=(()=>{class n{constructor(){this.index=0,this.allowHalf=!1,this.itemHover=new t.vpe,this.itemClick=new t.vpe}hoverRate(e){this.itemHover.next(e&&this.allowHalf)}clickRate(e){this.itemClick.next(e&&this.allowHalf)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["","nz-rate-item",""]],inputs:{index:"index",allowHalf:"allowHalf",character:"character"},outputs:{itemHover:"itemHover",itemClick:"itemClick"},exportAs:["nzRateItem"],attrs:Rt,decls:6,vars:8,consts:[[1,"ant-rate-star-second",3,"mouseover","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-rate-star-first",3,"mouseover","click"],["defaultCharacter",""],["nz-icon","","nzType","star","nzTheme","fill"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.NdJ("mouseover",function(s){return i.hoverRate(!1),s.stopPropagation()})("click",function(){return i.clickRate(!1)}),t.YNc(1,Jt,0,0,"ng-template",1),t.qZA(),t.TgZ(2,"div",2),t.NdJ("mouseover",function(s){return i.hoverRate(!0),s.stopPropagation()})("click",function(){return i.clickRate(!0)}),t.YNc(3,Ut,0,0,"ng-template",1),t.qZA(),t.YNc(4,Mt,1,0,"ng-template",null,3,t.W1O)),2&e){const r=t.MAs(5);t.xp6(1),t.Q6J("ngTemplateOutlet",i.character||r)("ngTemplateOutletContext",t.VKq(4,et,i.index)),t.xp6(2),t.Q6J("ngTemplateOutlet",i.character||r)("ngTemplateOutletContext",t.VKq(6,et,i.index))}},directives:[p.tP,w.Ls],encapsulation:2,changeDetection:0}),(0,f.gn)([(0,_.yF)()],n.prototype,"allowHalf",void 0),n})(),Yt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[Q.vT,p.ez,w.PV,I.cg]]}),n})();var J=l(53197),T=l(43654),it=l(93845);let ot=(()=>{class n{transform(e){return new Date(e.toString()).toLocaleDateString()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"dateText",type:n,pure:!0}),n})(),Lt=(()=>{class n{transform(e){let i;switch(e){case 1:i="Nh\u1eadp kho";break;case 2:i="Xu\u1ea5t kho";break;case 3:i="Ho\xe0n h\xe0ng";break;case 4:i="Chuy\u1ec3n kho";break;case 5:i="S\u1eeda ch\u1eefa";break;case 6:i="B\u1ea3o tr\xec";break;default:i="Ch\u01b0a c\xf3 "}return i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"taskType",type:n,pure:!0}),n})(),Vt=(()=>{class n{transform(e){let i;switch(e){case 1:i="green";break;case 2:i="gold";break;case 3:i="red";break;default:i=""}return i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"taskStatusColor",type:n,pure:!0}),n})(),Bt=(()=>{class n{transform(e){let i;switch(e){case 1:i="\u0110ang th\u1ef1c hi\u1ec7n";break;case 2:i="Ho\xe0n th\xe0nh";break;case 3:i="H\u1ee7y";break;default:i=""}return i}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"taskStatus",type:n,pure:!0}),n})(),Xt=(()=>{class n{transform(e){return new Date(e.toString()).toDateString()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"dateFile",type:n,pure:!0}),n})();function Ht(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",40),t.TgZ(1,"div",11),t.TgZ(2,"div",41),t.TgZ(3,"span",8),t._uU(4,"Ng\u01b0\u1eddi \u0111\xe1nh gi\xe1 :"),t.qZA(),t.qZA(),t.TgZ(5,"div",42),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"div",16),t.TgZ(8,"div",43),t.TgZ(9,"span",8),t._uU(10,"\u0110\xe1nh gi\xe1 :"),t.qZA(),t.qZA(),t.TgZ(11,"div",42),t._UZ(12,"nz-rate",44),t.TgZ(13,"i",45),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).showRateTitle()}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(6),t.hij(" ",e.rateTask&&e.rateTask.rateBy?e.rateTask.rateBy.lastName?e.rateTask.rateBy.lastName.concat(" ",e.rateTask.rateBy.firstName):e.rateTask.rateBy.firstName?e.rateTask.rateBy.firstName:"-":"-"," "),t.xp6(6),t.Q6J("ngModel",e.rateTask.rate),t.xp6(1),t.Q6J("nzTooltipColor","#EE1A30")}}function Pt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",40),t.TgZ(1,"span",46),t._uU(2,"\u0110\xe1nh gi\xe1 :"),t.qZA(),t.TgZ(3,"span",47),t._uU(4,"Ch\u01b0a c\xf3 \u0111\xe1nh gi\xe1"),t.qZA(),t.TgZ(5,"i",48),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).showRateTitle()}),t.qZA(),t.qZA()}2&n&&(t.xp6(5),t.Q6J("nzTooltipColor","#EE1A30"))}function $t(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li",54),t._uU(1),t.TgZ(2,"ul",55),t.TgZ(3,"nz-list-item-action"),t.TgZ(4,"a",56),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(4).removeFile(s.uid)}),t._UZ(5,"i",57),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function Kt(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"ul",52),t.YNc(2,$t,6,1,"li",53),t.qZA(),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("nzDataSource",e.fileCodeList),t.xp6(1),t.Q6J("ngForOf",e.fileCodeList)}}function jt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2).$implicit;return t.oxw().addFileTask(r.id)}),t._UZ(1,"i",58),t._uU(2," L\u01b0u File "),t.qZA()}}function Gt(n,o){if(1&n&&(t.YNc(0,Kt,3,2,"ng-container",49),t.TgZ(1,"div",50),t.YNc(2,jt,3,0,"button",51),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.fileCodeList&&e.fileCodeList.length>0),t.xp6(2),t.Q6J("ngIf",e.fileCodeList.length>0)}}function Wt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"a",59),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit;return t.oxw().showfileTask(r.id)}),t.TgZ(2,"u",60),t._uU(3,"Danh s\xe1ch file \u0111\xednh k\xe8m \u0111\xe3 l\u01b0u "),t._UZ(4,"i",61),t.qZA(),t.qZA(),t.qZA()}}function te(n,o){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"a",70),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"dateText"),t.qZA(),t.qZA()),2&n){const e=o.$implicit,i=o.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.s9C("href",e.downloadUrl,t.LSH),t.s9C("download",e.fileName),t.xp6(1),t.Oqu(e.fileName?e.fileName:"-"),t.xp6(2),t.Oqu(e.fileSize?e.fileSize:"-"),t.xp6(2),t.hij(" ",e.timestamp?t.lcZ(10,6,e.timestamp):"-"," ")}}function ee(n,o){if(1&n&&(t.TgZ(0,"div",67),t.TgZ(1,"nz-table",68,69),t.TgZ(3,"thead"),t.TgZ(4,"tr"),t.TgZ(5,"th"),t._uU(6,"STT"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"T\xean File"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Dung l\u01b0\u1ee3ng"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Th\u1eddi gian t\u1ea1o"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"tbody"),t.YNc(14,te,11,8,"tr",17),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.MAs(2),i=t.oxw(3);t.xp6(1),t.Q6J("nzData",i.listOfFileTask),t.xp6(13),t.Q6J("ngForOf",e.data)}}function ne(n,o){1&n&&(t.TgZ(0,"div"),t.TgZ(1,"span",71),t._uU(2,"(Danh s\xe1ch tr\u1ed1ng)"),t.qZA(),t.qZA())}function ie(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",62),t.TgZ(1,"span",38),t.TgZ(2,"a",63),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).hiddenfileTask()}),t._UZ(3,"i",64),t.qZA(),t._uU(4,"Danh s\xe1ch file \u0111\xednh k\xe8m"),t.qZA(),t.YNc(5,ee,15,2,"div",65),t.YNc(6,ne,3,0,"ng-template",null,66,t.W1O),t.qZA()}if(2&n){const e=t.MAs(7),i=t.oxw(2);t.xp6(5),t.Q6J("ngIf",i.listOfFileTask&&i.listOfFileTask.length>0)("ngIfElse",e)}}function oe(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",79),t.NdJ("mouseover",function(){return t.CHM(e),t.oxw(4).changeAction()}),t._UZ(1,"i",80),t.qZA()}}function re(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",81),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3).$implicit;return t.oxw().createContent(r)}),t._UZ(1,"i",82),t.qZA()}}function se(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",83),t.NdJ("mouseleave",function(){return t.CHM(e),t.oxw(4).hiddenAction()}),t.TgZ(2,"button",84),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3).$implicit;return t.oxw().editContent(r)}),t._UZ(3,"i",85),t.qZA(),t.TgZ(4,"button",86),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3).$implicit;return t.oxw().comFor(r)}),t._UZ(5,"i",87),t.qZA(),t.TgZ(6,"button",88),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(3).$implicit;return t.oxw().canFor(r)}),t._UZ(7,"i",89),t.qZA(),t.qZA(),t.BQk()}}function ae(n,o){if(1&n&&(t.ynx(0),t.YNc(1,oe,2,0,"button",77),t.YNc(2,re,2,0,"button",78),t.YNc(3,se,8,0,"ng-container",49),t.BQk()),2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngIf",1==e.status&&1==i.buttonMore),t.xp6(1),t.Q6J("ngIf",2==e.status||3==e.status),t.xp6(1),t.Q6J("ngIf",i.changeButton)}}const le=function(n,o){return{padding:n,"margin-right":o}};function ce(n,o){if(1&n&&(t.TgZ(0,"div",72),t.TgZ(1,"span",73),t._uU(2),t.ALo(3,"taskType"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.TgZ(6,"span",74),t.TgZ(7,"nz-tag",75),t.ALo(8,"taskStatusColor"),t._uU(9),t.ALo(10,"taskStatus"),t.qZA(),t.TgZ(11,"span",76),t._uU(12),t.ALo(13,"dateText"),t.qZA(),t.YNc(14,ae,4,3,"ng-container",49),t.qZA(),t.qZA()),2&n){const e=t.oxw(),i=e.$implicit,r=e.index;t.oxw(),t.xp6(2),t.Oqu(t.lcZ(3,7,i.type)),t.xp6(3),t.hij(" ",i.assignee.lastName?i.assignee.lastName.concat(" ",i.assignee.firstName):i.assignee.firstName?i.assignee.firstName:"-"," "),t.xp6(1),t.Q6J("ngStyle",t.WLB(15,le,0==r?"0px":"4px",0==r?"0px":"40px")),t.xp6(1),t.Q6J("nzColor",t.lcZ(8,9,i.status)),t.xp6(2),t.Oqu(t.lcZ(10,11,i.status)),t.xp6(3),t.Oqu(t.lcZ(13,13,i.createdDate)),t.xp6(2),t.Q6J("ngIf",0==r)}}function ue(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"nz-collapse",23),t.TgZ(2,"nz-collapse-panel",24),t.NdJ("nzActiveChange",function(r){const c=t.CHM(e).$implicit;return t.oxw().activeCollapseChange(r,c.id)}),t.TgZ(3,"div"),t.TgZ(4,"div",11),t.TgZ(5,"div",25),t.TgZ(6,"span",8),t._uU(7,"N\u1ed9i dung :"),t.qZA(),t.qZA(),t.TgZ(8,"div",26),t.TgZ(9,"div",11),t._uU(10),t.qZA(),t.qZA(),t.YNc(11,Ht,14,3,"div",27),t.YNc(12,Pt,6,1,"div",27),t.qZA(),t.TgZ(13,"div",16),t.TgZ(14,"div",25),t.TgZ(15,"span",8),t._uU(16,"Deadline :"),t.qZA(),t.qZA(),t.TgZ(17,"div",26),t.TgZ(18,"span",8),t._uU(19),t.ALo(20,"dateText"),t.qZA(),t.qZA(),t.qZA(),t._UZ(21,"nz-divider"),t.TgZ(22,"div"),t.TgZ(23,"h5",8),t._uU(24,"T\u1ec7p \u0111\xednh k\xe8m"),t.qZA(),t.TgZ(25,"div",28),t.TgZ(26,"div",29),t.TgZ(27,"nz-spin",30),t.TgZ(28,"nz-upload",31),t.TgZ(29,"p",32),t._UZ(30,"img",33),t.qZA(),t.TgZ(31,"p",34),t._uU(32," K\xe9o th\u1ea3 file c\u1ee7a b\u1ea1n ho\u1eb7c "),t.TgZ(33,"a"),t._uU(34,"ch\u1ecdn t\u1ec7p tin"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(35,Gt,3,2,"ng-template",null,35,t.W1O),t.YNc(37,Wt,5,0,"div",36),t.qZA(),t.YNc(38,ie,8,2,"div",37),t.TgZ(39,"div",5),t.TgZ(40,"div",11),t.TgZ(41,"span",38),t._uU(42,"Ghi ch\xfa :"),t.qZA(),t.qZA(),t.TgZ(43,"div",11),t.TgZ(44,"p",8),t._uU(45),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(46,ce,15,18,"ng-template",null,39,t.W1O),t.BQk()}if(2&n){const e=o.$implicit,i=t.MAs(36),r=t.MAs(47),s=t.oxw();t.xp6(2),t.Q6J("nzHeader",r)("nzActive",!1),t.xp6(8),t.hij(" ",e.title?e.title:"Ch\u01b0a c\xf3 n\u1ed9i dung"," "),t.xp6(1),t.Q6J("ngIf",null!=s.rateTask),t.xp6(1),t.Q6J("ngIf",null==s.rateTask),t.xp6(7),t.Oqu(e.deadline?t.lcZ(20,13,e.deadline):"-"),t.xp6(8),t.Q6J("nzSpinning",s.codeUploading),t.xp6(1),t.Q6J("nzMultiple",!0)("nzBeforeUpload",s.beforeUploadCode)("nzFileListRender",i),t.xp6(9),t.Q6J("ngIf",!s.showFile),t.xp6(1),t.Q6J("ngIf",s.showFile),t.xp6(7),t.hij(" ",e.description?e.description:"(Ch\u01b0a c\xf3 ghi ch\xfa)"," ")}}function pe(n,o){if(1&n&&(t.TgZ(0,"div",93),t.TgZ(1,"div",94),t.TgZ(2,"a",70),t._UZ(3,"img",95),t.qZA(),t.qZA(),t.TgZ(4,"div",96),t.TgZ(5,"div",11),t.TgZ(6,"span",38),t._uU(7),t.qZA(),t.qZA(),t.TgZ(8,"div",97),t.TgZ(9,"span",8),t._uU(10),t.qZA(),t.TgZ(11,"span",8),t._uU(12),t.ALo(13,"dateFile"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=o.$implicit;t.xp6(2),t.s9C("href",e.downloadUrl,t.LSH),t.s9C("download",e.fileName),t.xp6(5),t.Oqu(e.fileName?e.fileName:"-"),t.xp6(3),t.hij(" ",e.fileSize?e.fileSize:"-",""),t.xp6(2),t.hij(" ",e.timestamp?t.lcZ(13,5,e.timestamp):"-","")}}function he(n,o){if(1&n&&(t.TgZ(0,"nz-sider",90),t.TgZ(1,"h4",8),t._uU(2,"File \u0111\xednh k\xe8m"),t.qZA(),t.TgZ(3,"div",67),t.TgZ(4,"div",11),t.TgZ(5,"h5",8),t._uU(6,"M\u1edbi t\u1ea3i g\u1ea7n \u0111\xe2y"),t.qZA(),t.qZA(),t.TgZ(7,"div",91),t.YNc(8,pe,14,7,"div",92),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw();t.xp6(8),t.Q6J("ngForOf",e.listOfFile)}}function me(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",98),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().submitTitle()}),t.TgZ(2,"nz-form-item"),t.TgZ(3,"nz-form-label",99),t.TgZ(4,"span"),t._uU(5,"Ti\xeau \u0111\u1ec1"),t.qZA(),t.qZA(),t.TgZ(6,"nz-form-control",100),t._UZ(7,"input",101),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.editTitleForm)("nzLayout","vertical"),t.xp6(2),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24)}}function de(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",102),t.NdJ("click",function(){return t.CHM(e),t.oxw().submitTitle()}),t._uU(2," C\u1eadp nh\u1eadt "),t.qZA(),t.TgZ(3,"button",103),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancelTitle()}),t._uU(4,"H\u1ee7y"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("nzLoading",e.editSubmitting)}}function ge(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",104),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().submitRate()}),t.TgZ(2,"nz-form-item"),t.TgZ(3,"nz-form-label",105),t.TgZ(4,"span"),t._uU(5,"\u0110\xe1nh gi\xe1"),t.qZA(),t.qZA(),t.TgZ(6,"nz-form-control",106),t._UZ(7,"nz-rate",107),t.qZA(),t.qZA(),t.TgZ(8,"nz-form-item"),t.TgZ(9,"nz-form-label",108),t.TgZ(10,"span"),t._uU(11,"Nh\u1eadn x\xe9t "),t.qZA(),t.qZA(),t.TgZ(12,"nz-form-control",106),t.TgZ(13,"nz-textarea-count",109),t._UZ(14,"textarea",110),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.editRateForm)("nzLayout","vertical"),t.xp6(2),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(3),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(1),t.Q6J("nzMaxCharacterCount",100)}}function _e(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",102),t.NdJ("click",function(){return t.CHM(e),t.oxw().submitRate()}),t._uU(2),t.qZA(),t.TgZ(3,"button",103),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancelRate()}),t._uU(4,"H\u1ee7y"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("nzLoading",e.editRateSubmitting),t.xp6(1),t.hij(" ",e.editRate?"Ch\u1ec9nh s\u1eeda \u0111\xe1nh gi\xe1":"T\u1ea1o \u0111\xe1nh gi\xe1"," ")}}const rt=function(){return[10,10]};let ze=(()=>{class n{constructor(e,i,r,s,c){this.modal=e,this.baseService=i,this.fb=r,this.activeroute=s,this.ticketService=c,this.changeButton=!1,this.showAttachFile=!1,this.fileCodeList=[],this.hiddenfile=!1,this.beforeUploadCode=(u,v)=>"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===u.type||"application/vnd.ms-excel"===u.type||".csv"===u.type||"application/msword"===u.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"===u.type||"application/vnd.ms-powerpoint"===u.type||"application/vnd.openxmlformats-officedocument.presentationml.presentation"===u.type||"application/pdf"===u.type||"image/jpeg"===u.type?(this.fileCodeList&&this.fileCodeList.push(u),this.codeErrMessage="",this.handleUploadCode(),!1):(this.baseService.showNotification("Vui l\xf2ng ch\u1ec9 ch\u1ecdn \u0111\u1ecbnh d\u1ea1ng file .xlsx!, .xls, .doc, .docx, .ppt, .pptx, .png, .jpeg, .jpg",d.gT.NOTI_ERROR),!1),this.editTitle=!1,this.editSubmitting=!1,this.comleteSubmitting=!1,this.editRate=!1,this.openRate=!1,this.editRateSubmitting=!1,this.showFile=!1,this.buttonMore=!0,this.listAllFile=[],this.activeroute.paramMap.subscribe(u=>{this.id=u.params.id,this.getDetailTicket(this.id)}),window.addEventListener("EditTask",()=>{this.getListTask()})}ngOnInit(){this.fileCodeList=[],this.getListTask()}getDetailTicket(e){this.ticketService.getDetailTickets(e).subscribe(i=>{this.ItemTicket=new P(i.data)},i=>{console.log("Kh\xf4ng gwuir \u0111\u01b0\u1ee3c request l\u1ea5y chi ti\u1ebft ticket",i)})}getListTask(){this.ticketService.getAllTaskByTicket(this.id).subscribe(e=>{console.log("list Task",e),0==e.error&&this.resonseListTask(e)},e=>{console.log("Khong gui dc request lay list data",e)})}resonseListTask(e){this.listOfTask=[],e.data.length>0&&e.data.forEach(i=>{let r=new ut(i);this.listOfTask.push(r)})}activeCollapseChange(e,i){e&&(this.idTaskFocus=i,this.getRateByTask(i))}getRateByTask(e){this.ticketService.getDataRatingByTask(e).subscribe(i=>{0==i.error&&(this.rateTask=null!=i.data?i.data:null)},i=>{console.log("Khong gui dc request lay data rating c\u1ee7a task",i)})}handleUploadCode(){console.log(" X\u1eed l\xfd file \u0111\u01b0\u1ee3c th\xeam v\xe0o",this.fileCodeList),this.handleCodeChange("uploading"),this.fileCodeList.forEach(e=>{e?this.handleCodeChange("done",e):this.handleCodeChange("error")})}removeFile(e){this.fileCodeList=this.fileCodeList.filter(i=>i.uid!==e)}handleCodeChange(e,i){switch(e){case"uploading":this.codeUploading=!0;break;case"done":this.codeUploading=!1,this.hiddenfile=!1;break;case"removed":this.codeUploading=!1,this.hiddenfile=!0;break;case"error":this.codeErrMessage="Upload b\u1ecb l\u1ed7i, vui l\xf2ng th\u1eed l\u1ea1i",this.codeUploading=!1}}attachFile(){this.showAttachFile=!this.showAttachFile,this.showAttachFile?this.ticketService.getAllFileByTicket(this.id).subscribe(e=>{0==e.error&&this.responeFileAttach(e)}):this.listOfFile=[]}responeFileAttach(e){this.listOfFile=[],e.data.length>0&&e.data.forEach(i=>{let r=new H(i);this.listOfFile.push(r)})}showEditTitle(){this.editTitle=!0,this.editTitleForm=this.fb.group({title:[null,[a.kI.required]]})}submitTitle(){for(const e in this.editTitleForm.controls)this.editTitleForm.controls.hasOwnProperty(e)&&(this.editTitleForm.controls[e].markAsDirty(),this.editTitleForm.controls[e].updateValueAndValidity()),this.editTitleForm.invalid||this.ticketService.updateTittleTicket(this.id,this.editTitleForm.controls.title.value).subscribe(i=>{0==i.error&&(this.baseService.showToast("Ch\u1ec9nh s\u1eeda ti\xeau \u0111\u1ec1 nhi\u1ec7m v\u1ee5 th\xe0nh c\xf4ng",d.gT.TOAST_OK),this.getDetailTicket(this.id),this.cancelTitle())},i=>{console.log("kh\xf4ng gui \u0111\u01b0\u1ee3c th\xf4ng tin ch\u1ec9nh s\u1eeda title",i)})}cancelTitle(){this.editTitle=!1}submitCompleteConfirm(){}showRateTitle(){this.openRate=!0,this.editRateForm=this.fb.group({description:[null,[a.kI.required]],stars:[null,[a.kI.required]]}),null!=this.rateTask?(this.editRate=!0,this.editRateForm.controls.stars.setValue(this.rateTask.rate),this.editRateForm.controls.description.setValue(this.rateTask.description)):(this.editRate=!1,this.editRateForm.controls.stars.setValue(null),this.editRateForm.controls.description.setValue(null))}submitRate(){for(const e in this.editRateForm.controls)this.editRateForm.controls.hasOwnProperty(e)&&(this.editRateForm.controls[e].markAsDirty(),this.editRateForm.controls[e].updateValueAndValidity());this.datenow=new Date,this.currentUser=this.baseService.getCachedUser(),this.importerId=this.currentUser.id,this.editRateForm.invalid||(this.editRate?this.ticketService.updateRating(this.rateTask.id,this.editRateForm.controls.stars.value,this.importerId,this.editRateForm.controls.description.value,this.datenow.toISOString()).subscribe(e=>{0==e.error&&(this.baseService.showToast("Ch\u1ec9nh s\u1eeda \u0111\xe1nh gi\xe1 th\xe0nh c\xf4ng",d.gT.TOAST_OK),this.rateTask=e.data,this.cancelRate())},e=>{console.log("kh\xf4ng gui \u0111\u01b0\u1ee3c th\xf4ng tin ch\u1ec9nh s\u1eeda \u0111\xe1nh gi\xe1",e)}):this.ticketService.createRating(this.editRateForm.controls.stars.value,this.importerId,this.idTaskFocus,this.editRateForm.controls.description.value,this.datenow.toISOString()).subscribe(e=>{0==e.error&&(console.log("\u0111\xe1nh gi\xe1",e),this.baseService.showToast("\u0110\xe1nh gi\xe1 th\xe0nh c\xf4ng",d.gT.TOAST_OK),this.rateTask=e.data,this.cancelRate())},e=>{console.log("kh\xf4ng gui \u0111\u01b0\u1ee3c th\xf4ng tin ch\u1ec9nh s\u1eeda title",e)}))}cancelRate(){this.openRate=!1}editContent(e){this.ticketService.editTask(e),this.modal.create({nzContent:qt,nzClosable:!1})}createContent(e){this.ticketService.editTask(e),this.modal.create({nzContent:Et,nzClosable:!1})}comFor(e){this.ticketService.editTask(e),this.ticketService.statusCurrent(!0),this.modal.create({nzContent:G,nzClosable:!1})}canFor(e){this.ticketService.editTask(e),this.ticketService.statusCurrent(!1),this.modal.create({nzContent:G,nzClosable:!1})}showfileTask(e){this.showFile=!0,this.getListFileOfTask(e)}getListFileOfTask(e){this.ticketService.showFile(e).subscribe(i=>{0==i.error&&this.responeShowFile(i)})}responeShowFile(e){this.listOfFileTask=[],e.data.length>0&&e.data.forEach(i=>{let r=new H(i);this.listOfFileTask.push(r)})}hiddenfileTask(){this.showFile=!1}addFileTask(e){this.ticketService.addFileOfTask(e,this.fileCodeList).subscribe(i=>{0==i.error&&(this.baseService.showToast("Th\xeam file v\xe0o task th\xe0nh c\xf4ng",d.gT.TOAST_OK),this.getListFileOfTask(e),this.fileCodeList.length=0)})}changeAction(){this.changeButton=!0,this.buttonMore=!1}hiddenAction(){this.changeButton=!1,this.buttonMore=!0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.Sf),t.Y36(d.bQ),t.Y36(a.qu),t.Y36(M.gz),t.Y36(F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cms-detail"]],decls:71,vars:19,consts:[["title","Chi ti\u1ebft nhi\u1ec7m v\u1ee5",3,"close"],["action",""],["nz-button","","nzType","primary","nzGhost","",1,"mr-2",3,"click"],["nz-icon","","nzType","file-done","nzTheme","outline"],["content",""],[1,"mt-5"],[1,"imformation-detail","mt-3"],["nz-row","",1,"mb-2"],["nz-typography",""],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","8"],["nz-row",""],["nz-row","",1,"mt-3",3,"nzGutter"],["nz-typography","",1,"mr-2"],["nz-icon","","nzType","edit","nzTheme","outline","nz-tooltip","","nzTooltipTitle","ch\u1ec9nh s\u1eeda ti\xeau \u0111\u1ec1",1,"mt-1",2,"color","#ee1a30",3,"nzTooltipColor","click"],[1,"history-detail","mt-3"],["nz-row","",1,"mt-3"],[4,"ngFor","ngForOf"],["class","ml-5 mt-5 px-5 py-3","nzWidth","350px",4,"ngIf"],["nzTitle","Ch\u1ec9nh s\u1eeda ti\xeau \u0111\u1ec1",3,"nzVisible","nzClosable","nzVisibleChange"],[4,"nzModalContent"],[4,"nzModalFooter"],[3,"nzVisible","nzClosable","nzTitle","nzVisibleChange"],["nzAccordion","",2,"width","100%"],[2,"width","100%",3,"nzHeader","nzActive","nzActiveChange"],["nz-col","","nzSpan","3"],["nz-col","","nzSpan","12"],["nz-col","","nzSpan","9",4,"ngIf"],[2,"border","1px solid #f2f2f2","border-radius","10px"],[1,"my-5",2,"width","75%","margin","auto"],[3,"nzSpinning"],["nzType","drag","nzAction","https://www.mocky.io/v2/5cc8019d300000980a055e76",3,"nzMultiple","nzBeforeUpload","nzFileListRender"],[1,"ant-upload-drag-icon"],["width","45px","src","/assets/file.svg"],[1,"ant-upload-text","mx-5"],["listFile",""],["nz-row","","class","mt-3",4,"ngIf"],["class","mt-3 ml-3",4,"ngIf"],["nz-typography","",1,"text-bold"],["panelTitile",""],["nz-col","","nzSpan","9"],["nz-col","","nzSpan","10"],["nz-col","","nzSpan","14"],["nz-col","","nzSpan","10",1,"mt-1"],["nzDisabled","",3,"ngModel"],["nz-icon","","nzType","edit","nzTheme","outline","nz-tooltip","","nzTooltipTitle","Ch\u1ec9nh s\u1eeda \u0111\xe1nh gi\xe1",1,"mt-2","ml-4",2,"color","#ee1a30",3,"nzTooltipColor","click"],["nz-typography","",1,"mr-5"],["nz-typography","","nzType","secondary"],["nz-icon","","nzType","edit","nzTheme","outline","nz-tooltip","","nzTooltipTitle","\u0110\xe1nh gi\xe1",1,"mt-2","ml-4",2,"color","#ee1a30",3,"nzTooltipColor","click"],[4,"ngIf"],[1,"mb-3",2,"display","flex","justify-content","center"],["nz-button","","nzType","primary","nzGhost","","class","mr-2",3,"click",4,"ngIf"],["nz-list","","nzSize","small",1,"mt-1",3,"nzDataSource"],["nz-list-item","","nzNoFlex","",4,"ngFor","ngForOf"],["nz-list-item","","nzNoFlex",""],["nz-list-item-actions",""],[3,"click"],["nz-icon","","nzType","delete","nzTheme","outline",1,"text-danger"],["nz-icon","","nzType","save","nzTheme","outline",1,"mr-2"],[2,"margin","auto",3,"click"],[1,"ml-3"],["nz-icon","","nzType","double-right","nzTheme","outline"],[1,"mt-3","ml-3"],[1,"mr-2",3,"click"],["nz-icon","","nzType","double-left","nzTheme","outline"],["class","mt-3",4,"ngIf","ngIfElse"],["nodata",""],[1,"mt-3"],[3,"nzData"],["basicTable",""],[3,"href","download"],["nz-typography","",1,"ml-5"],[2,"display","inline"],[1,"mr-4"],[2,"float","right",3,"ngStyle"],[1,"mr-5","ml-5","header-title",3,"nzColor"],["nz-typography","",1,"mr-5","ml-5","header-title"],["nz-button","","nz-tooltip","","nzTooltipTitle","M\u1edf r\u1ed9ng","nzType","default","nzShape","circle","class","mr-2",3,"mouseover",4,"ngIf"],["nz-button","","nz-tooltip","","nzTooltipTitle","Chuy\u1ec3n ti\u1ebfp","nzType","default","nzShape","circle","class","mr-2",3,"click",4,"ngIf"],["nz-button","","nz-tooltip","","nzTooltipTitle","M\u1edf r\u1ed9ng","nzType","default","nzShape","circle",1,"mr-2",3,"mouseover"],["nz-icon","","nzType","more","nzTheme","outline"],["nz-button","","nz-tooltip","","nzTooltipTitle","Chuy\u1ec3n ti\u1ebfp","nzType","default","nzShape","circle",1,"mr-2",3,"click"],["nz-icon","","nzType","forward","nzTheme","outline"],[2,"display","inline",3,"mouseleave"],["nz-button","","nz-tooltip","","nzTooltipTitle","Ch\u1ec9nh s\u1eeda","nzType","default","nzShape","circle",1,"mr-2",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-button","","nz-tooltip","","nzTooltipTitle","Ho\xe0n th\xe0nh","nzType","default","nzShape","circle",1,"mr-2",3,"click"],["nz-icon","","nzType","check-circle","nzTheme","outline"],["nz-button","","nz-tooltip","","nzTooltipTitle","H\u1ee7y","nzType","default","nzShape","circle",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"],["nzWidth","350px",1,"ml-5","mt-5","px-5","py-3"],[1,"mt-3",2,"border-bottom","2px solid #fff"],["nz-row","","class","mb-3",4,"ngFor","ngForOf"],["nz-row","",1,"mb-3"],["nz-col","","nzSpan","6"],["src","/assets/file.svg","height","36"],["nz-col","","nzSpan","18"],[2,"display","flex","justify-content","space-between"],["nz-form","",1,"px-3",3,"formGroup","nzLayout","ngSubmit"],["nzFor","title","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1!",3,"nzSm","nzXs"],["nz-input","","id","title","formControlName","title","placeholder","Nh\u1eadp ti\xeau \u0111\u1ec1",1,"pl-3"],["nz-button","","nzType","primary",1,"m-2",3,"nzLoading","click"],["nz-button","","nzType","default",3,"click"],["nz-form","",1,"px-5",3,"formGroup","nzLayout","ngSubmit"],["nzFor","stars","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng ch\u1ecdn ng\u01b0\u1eddi \u0111\xe1nh gi\xe1!",3,"nzSm","nzXs"],["formControlName","stars"],["nzFor","rater","nzRequired","",3,"nzSm","nzXs"],[3,"nzMaxCharacterCount"],["rows","4","formControlName","description","nz-input",""]],template:function(e,i){1&e&&(t.TgZ(0,"cms-page",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return i.attachFile()}),t._UZ(3,"i",3),t.qZA(),t.qZA(),t.TgZ(4,"div",4),t.TgZ(5,"nz-layout",5),t.TgZ(6,"nz-content"),t.TgZ(7,"div",6),t.TgZ(8,"div",7),t.TgZ(9,"h5",8),t._uU(10,"Th\xf4ng tin c\u01a1 b\u1ea3n"),t.qZA(),t.qZA(),t.TgZ(11,"div",9),t.TgZ(12,"div",10),t.TgZ(13,"div",11),t.TgZ(14,"span",8),t._uU(15,"M\xe3 nhi\u1ec7m v\u1ee5 "),t.qZA(),t.qZA(),t.TgZ(16,"div",11),t.TgZ(17,"span",8),t._uU(18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",10),t.TgZ(20,"div",11),t.TgZ(21,"span",8),t._uU(22,"Ng\u01b0\u1eddi t\u1ea1o "),t.qZA(),t.qZA(),t.TgZ(23,"div",11),t.TgZ(24,"span",8),t._uU(25),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"div",10),t.TgZ(27,"div",11),t.TgZ(28,"span",8),t._uU(29,"Ng\xe0y t\u1ea1o "),t.qZA(),t.qZA(),t.TgZ(30,"div",11),t.TgZ(31,"span",8),t._uU(32),t.ALo(33,"dateText"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",12),t.TgZ(35,"div",10),t.TgZ(36,"div",11),t.TgZ(37,"span",13),t._uU(38,"Ti\xeau \u0111\u1ec1 "),t.qZA(),t.TgZ(39,"i",14),t.NdJ("click",function(){return i.showEditTitle()}),t.qZA(),t.qZA(),t.TgZ(40,"div",11),t.TgZ(41,"span",8),t._uU(42),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"div",10),t.TgZ(44,"div",11),t.TgZ(45,"span",8),t._uU(46,"Ng\u01b0\u1eddi \u0111\xf3ng "),t.qZA(),t.qZA(),t.TgZ(47,"div",11),t.TgZ(48,"span",8),t._uU(49," - "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",10),t.TgZ(51,"div",11),t.TgZ(52,"span",8),t._uU(53,"Ng\xe0y \u0111\xf3ng "),t.qZA(),t.qZA(),t.TgZ(54,"div",11),t.TgZ(55,"span",8),t._uU(56," - "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(57,"nz-divider"),t.TgZ(58,"div",15),t.TgZ(59,"div",11),t.TgZ(60,"h5",8),t._uU(61,"L\u1ecbch s\u1eed giao vi\u1ec7c"),t.qZA(),t.qZA(),t.TgZ(62,"div",16),t.YNc(63,ue,48,15,"ng-container",17),t.qZA(),t.qZA(),t.qZA(),t.YNc(64,he,9,1,"nz-sider",18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(65,"nz-modal",19),t.NdJ("nzVisibleChange",function(s){return i.editTitle=s}),t.YNc(66,me,8,6,"ng-container",20),t.YNc(67,de,5,1,"div",21),t.qZA(),t.TgZ(68,"nz-modal",22),t.NdJ("nzVisibleChange",function(s){return i.openRate=s}),t.YNc(69,ge,15,11,"ng-container",20),t.YNc(70,_e,5,2,"div",21),t.qZA()),2&e&&(t.Q6J("close",!0),t.xp6(11),t.Q6J("nzGutter",t.DdM(17,rt)),t.xp6(7),t.hij(" ",i.ItemTicket&&i.ItemTicket.id?i.ItemTicket.id:"-",""),t.xp6(7),t.hij("",i.ItemTicket&&i.ItemTicket.createdBy?i.ItemTicket.createdBy.lastName.concat(" ",i.ItemTicket.createdBy.firstName):"-"," "),t.xp6(7),t.hij(" ",i.ItemTicket&&i.ItemTicket.createdDate?t.lcZ(33,15,i.ItemTicket.createdDate):"-"," "),t.xp6(2),t.Q6J("nzGutter",t.DdM(18,rt)),t.xp6(5),t.Q6J("nzTooltipColor","#EE1A30"),t.xp6(3),t.Oqu(i.ItemTicket&&i.ItemTicket.title?i.ItemTicket.title:"-"),t.xp6(21),t.Q6J("ngForOf",i.listOfTask),t.xp6(1),t.Q6J("ngIf",i.showAttachFile),t.xp6(1),t.Q6J("nzVisible",i.editTitle)("nzClosable",!1),t.xp6(3),t.Q6J("nzVisible",i.openRate)("nzClosable",!1)("nzTitle",i.editRate?"Ch\u1ec9nh s\u1eeda \u0111\xe1nh gi\xe1":"T\u1ea1o \u0111\xe1nh gi\xe1"))},directives:[d.Zd,E.ix,D.dQ,q.w,w.Ls,S.hw,S.OK,z.SK,b.ZU,z.t3,I.SY,W.g,p.sg,p.O5,m.du,m.Hf,m.Uh,L.yH,L.Zv,x.W,tt.FY,It,a.JJ,a.On,J.n_,J.AA,J.nk,J.KC,T.N8,T.Om,T.$Z,T.Uo,T._C,T.p0,p.PC,it.j,S.t7,a._Y,a.JL,h.Lr,a.sg,h.Nx,h.iK,h.Fd,C.Zp,a.Fj,a.u,C.w],pipes:[ot,Lt,Vt,Bt,Xt],styles:["@media only screen and (max-width: 768px){.header-title[_ngcontent-%COMP%]{display:none}}.ant-collapse[_ngcontent-%COMP%] > .ant-collapse-item[_ngcontent-%COMP%] > .ant-collapse-header[_ngcontent-%COMP%]:hover{box-shadow:inset 1px 0 #dadce0,inset -1px 0 #dadce0,0 1px 2px #3c40434d,0 1px 3px 1px #3c404326;z-index:2}"]}),n})();function fe(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1,"T\u1ea1o m\u1edbi ticket"),t.qZA())}function Te(n,o){if(1&n&&t._UZ(0,"nz-option",21),2&n){const e=o.$implicit;t.Q6J("nzLabel",e.text)("nzValue",e.value)}}function Ce(n,o){1&n&&t._UZ(0,"nz-spin")}function Ze(n,o){if(1&n&&t.YNc(0,Ce,1,0,"nz-spin",22),2&n){const e=t.oxw();t.Q6J("ngIf",e.isLoading)}}function ve(n,o){if(1&n&&t._UZ(0,"nz-option",21),2&n){const e=o.$implicit;t.Q6J("nzLabel",e.text)("nzValue",e.value)}}function ke(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().submitContent()}),t._uU(2," C\u1eadp nh\u1eadt "),t.qZA(),t.TgZ(3,"button",24),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancelContent()}),t._uU(4,"H\u1ee7y"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("nzLoading",e.createSubmitting)}}let Ae=(()=>{class n{constructor(e,i,r,s){this.fb=e,this.modalRef=i,this.ticketService=r,this.baseService=s,this.createSubmitting=!1,this.listOfOption=[],this.page=0,this.size=10,this.totalReceiver=0,this.listOfType=O,this.isLoading=!1,this.nzFilterOption=()=>!0}ngOnInit(){this.createContentForm=this.fb.group({title:[null,[a.kI.required]],content:[null,[a.kI.required]],deadline:[null,[a.kI.required]],receiver:[null,[a.kI.required]],type:[null,[a.kI.required]]}),this.page=1,this.size=10,this.getUserCurrent()}getUserCurrent(){this.currentUser=this.baseService.getCachedUser(),this.importerId=this.currentUser.id}search(e){this.page=0,this.size=10,this.keyreceiver=e,this.getReceiver()}loadMore(){this.totalReceiver>this.listOfOption.length&&(this.isLoading=!0,this.page=this.page+1,this.getReceiver())}getReceiver(){this.ticketService.getReceiver(this.page,this.size,this.keyreceiver).subscribe(e=>{0==e.error&&(console.log(e),this.responseProcessReceiver(e))},e=>{console.log("kh\xf4ng g\u1eedi \u0111\u01b0\u1ee3c request t\u1ea1o m\u1edbi",e)})}responseProcessReceiver(e){this.totalReceiver=e.data.total,this.listOfOption=[],e.data.data.forEach(i=>{this.listOfOption.push({value:i.id,text:i.lastName.concat(" ",i.firstName)})})}submitContent(){for(const e in this.createContentForm.controls)this.createContentForm.controls.hasOwnProperty(e)&&(this.createContentForm.controls[e].markAsDirty(),this.createContentForm.controls[e].updateValueAndValidity());this.datenow=new Date,this.createContentForm.invalid||this.ticketService.createTicket(this.createContentForm.controls.title.value,this.createContentForm.controls.content.value,this.createContentForm.controls.receiver.value,this.importerId,this.datenow.toISOString(),this.createContentForm.controls.type.value,this.createContentForm.controls.deadline.value.toISOString()).subscribe(e=>{0==e.error&&(this.baseService.showToast("Kh\u1edfi t\u1ea1o th\xe0nh c\xf4ng ticket m\u1edbi",d.gT.TOAST_OK),this.ticketService.reloadItem(),this.cancelContent())},e=>{console.log("kh\u01a1i tao th\u1ea5t b\u1ea1i",e)})}cancelContent(){this.modalRef.destroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.qu),t.Y36(m.Lf),t.Y36(F),t.Y36(d.bQ))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cms-create-ticket"]],decls:39,vars:27,consts:[[4,"nzModalTitle"],["nz-form","",1,"px-3",3,"formGroup","nzLayout","ngSubmit"],["nzFor","title","nzRequired","",3,"nzSm","nzXs"],["nz-typography",""],["nzErrorTip","Vui l\xf2ng nh\u1eadp ti\xeau \u0111\u1ec1!",3,"nzSm","nzXs"],["nz-input","","id","title","formControlName","title","placeholder","Nh\u1eadp ti\xeau \u0111\u1ec1",1,"pl-3"],["nzFor","content","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp n\u1ed9i dung!",3,"nzSm","nzXs"],["nz-input","","id","content","formControlName","content","placeholder","Nh\u1eadp n\u1ed9i dung",1,"pl-3"],["nzFor","deadline","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng ch\u1ecdn ng\xe0y!",3,"nzSm","nzXs"],["nzPlaceHolder","Ch\u1ecdn ng\xe0y","formControlName","deadline",2,"width","100%"],["nzFor","receiver","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng ch\u1ecdn t\xean ng\u01b0\u1eddi nh\u1eadn!",3,"nzSm","nzXs"],["nzShowSearch","","nzServerSearch","","nzPlaceHolder","Nh\u1eadp t\xean ng\u01b0\u1eddi nh\u1eadn","formControlName","receiver",3,"nzShowArrow","nzDropdownRender","nzFilterOption","nzScrollToBottom","nzOnSearch"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["renderTemplate",""],["nzFor","category","nzRequired","",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng ch\u1ecdn type!",3,"nzSm","nzXs"],["formControlName","type","nzPlaceHolder","Ch\u1ecdn lo\u1ea1i c\xf4ng vi\u1ec7c"],[4,"nzModalFooter"],[3,"nzLabel","nzValue"],[4,"ngIf"],["nz-button","","nzType","primary",1,"m-2",3,"nzLoading","click"],["nz-button","","nzType","default",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,fe,2,0,"div",0),t.TgZ(2,"div"),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return i.submitContent()}),t.TgZ(4,"nz-form-item"),t.TgZ(5,"nz-form-label",2),t.TgZ(6,"span",3),t._uU(7,"Ti\xeau \u0111\u1ec1"),t.qZA(),t.qZA(),t.TgZ(8,"nz-form-control",4),t._UZ(9,"input",5),t.qZA(),t.qZA(),t.TgZ(10,"nz-form-item"),t.TgZ(11,"nz-form-label",6),t.TgZ(12,"span",3),t._uU(13,"N\u1ed9i dung"),t.qZA(),t.qZA(),t.TgZ(14,"nz-form-control",7),t._UZ(15,"input",8),t.qZA(),t.qZA(),t.TgZ(16,"nz-form-item"),t.TgZ(17,"nz-form-label",9),t.TgZ(18,"span",3),t._uU(19,"Deadline"),t.qZA(),t.qZA(),t.TgZ(20,"nz-form-control",10),t._UZ(21,"nz-date-picker",11),t.qZA(),t.qZA(),t.TgZ(22,"nz-form-item"),t.TgZ(23,"nz-form-label",12),t.TgZ(24,"span",3),t._uU(25,"Ng\u01b0\u1eddi nh\u1eadn"),t.qZA(),t.qZA(),t.TgZ(26,"nz-form-control",13),t.TgZ(27,"nz-select",14),t.NdJ("nzScrollToBottom",function(){return i.loadMore()})("nzOnSearch",function(s){return i.search(s)}),t.YNc(28,Te,1,2,"nz-option",15),t.qZA(),t.YNc(29,Ze,1,1,"ng-template",null,16,t.W1O),t.qZA(),t.qZA(),t.TgZ(31,"nz-form-item"),t.TgZ(32,"nz-form-label",17),t.TgZ(33,"span",3),t._uU(34,"Type"),t.qZA(),t.qZA(),t.TgZ(35,"nz-form-control",18),t.TgZ(36,"nz-select",19),t.YNc(37,ve,1,2,"nz-option",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(38,ke,5,1,"div",20),t.qZA()),2&e){const r=t.MAs(30);t.xp6(3),t.Q6J("formGroup",i.createContentForm)("nzLayout","vertical"),t.xp6(2),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(3),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(3),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(3),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(1),t.Q6J("nzShowArrow",!1)("nzDropdownRender",r)("nzFilterOption",i.nzFilterOption),t.xp6(1),t.Q6J("ngForOf",i.listOfOption),t.xp6(4),t.Q6J("nzSm",22)("nzXs",24),t.xp6(3),t.Q6J("nzSm",24)("nzXs",24),t.xp6(2),t.Q6J("ngForOf",i.listOfType)}},directives:[m.h1,a._Y,a.JL,h.Lr,a.sg,z.SK,h.Nx,z.t3,h.iK,b.ZU,h.Fd,C.Zp,a.Fj,a.JJ,a.u,y.uw,Z.Vq,p.sg,m.Uh,Z.Ip,p.O5,x.W,E.ix,D.dQ,q.w],styles:[""]}),n})();var st=l(83730);function ye(n,o){1&n&&t._UZ(0,"i",22)}function xe(n,o){if(1&n&&t._UZ(0,"nz-option",27),2&n){const e=o.$implicit;t.Q6J("nzLabel",e.text)("nzValue",e.value)}}function Ee(n,o){1&n&&t._UZ(0,"nz-spin")}function we(n,o){if(1&n&&t.YNc(0,Ee,1,0,"nz-spin",28),2&n){const e=t.oxw();t.Q6J("ngIf",e.isLoading)}}function Se(n,o){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"a",29),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"dateText"),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t.TgZ(12,"button",30),t._UZ(13,"i",31),t.qZA(),t.qZA(),t.qZA()),2&n){const e=o.$implicit;t.xp6(2),t.MGl("href","/tasks/detail/",e.id,"",t.LSH),t.xp6(1),t.Oqu(e.id?e.id:"-"),t.xp6(2),t.Oqu(e.title?e.title:"-"),t.xp6(2),t.hij(" ",e.createdDate?t.lcZ(8,6,e.createdDate):"-"," "),t.xp6(3),t.hij(" ",e.createdBy?e.createdBy.lastName?e.createdBy.lastName.concat(" ",e.createdBy.firstName):e.createdBy.firstName?e.createdBy.firstName:"-":"-"," "),t.xp6(2),t.MGl("routerLink","detail/",e.id,"")}}function Fe(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij("T\u1ed5ng ",e.total," b\u1ea3n ghi")}}function be(n,o){if(1&n&&t.YNc(0,Fe,2,1,"span",28),2&n){const e=t.oxw();t.Q6J("ngIf",e.total)}}const De=function(){return[20,20]},qe=function(){return["T\u1eeb ng\xe0y","\u0110\u1ebfn ng\xe0y"]},Oe=[{path:"",component:(()=>{class n{constructor(e,i){this.modal=e,this.ticketService=i,this.listOfData=[],this.status=0,this.myTask=!1,this.pageReceiver=0,this.sizeReceiver=10,this.totalReceiver=0,this.listOfType=O,this.isLoading=!1,this.listOfOption=[],this.nzFilterOption=()=>!0,this.ticketService.reloadItemList$.subscribe(r=>{this.getAllTicket()})}search(e){this.pageReceiver=0,this.sizeReceiver=10,this.keyreceiver=e,this.getReceiver()}loadMore(){this.totalReceiver>this.listOfOption.length&&(this.isLoading=!0,this.pageReceiver=this.pageReceiver+1,this.getReceiver())}getReceiver(){this.ticketService.getReceiver(this.pageReceiver,this.sizeReceiver,this.keyreceiver).subscribe(e=>{0==e.error&&(console.log(e),this.responseProcessReceiver(e))},e=>{console.log("kh\xf4ng g\u1eedi \u0111\u01b0\u1ee3c request t\u1ea1o m\u1edbi",e)})}responseProcessReceiver(e){this.totalReceiver=e.data.total,this.listOfOption=[],e.data.data.forEach(i=>{this.listOfOption.push({value:i.id,text:i.lastName.concat(" ",i.firstName)})})}ngOnInit(){this.page=1,this.size=10,this.getAllTicket()}pageChange(e){}onChange(e){console.log(e),e.length>0?(this.dateStartCreate=e[0].toISOString(),this.dateEndCreate=e[1].toISOString(),this.searchAll()):(this.dateStartCreate=null,this.dateEndCreate=null,this.searchAll())}searchAll(){this.page=1,this.size=10,this.getAllTicket()}getAllTicket(){this.ticketService.getAllTicket(this.page-1,this.size,this.myTask,this.status,this.idTicket,this.createBy,this.dateStartCreate,this.dateEndCreate).subscribe(e=>{0==e.error&&this.responeProcess(e)},e=>{console.log("Kh\xf4ng g\u1eedi \u0111\u01b0\u1ee3c y\xeau c\u1ea7u l\u1ea5y ticket",e)})}responeProcess(e){this.total=e.data.total,this.listOfData=[],e.data.data.forEach(i=>{let r=new P(i);this.listOfData.push(r)})}alltask(){this.myTask=!1,this.status=0,this.getAllTicket()}mytask(){this.myTask=!0,this.status=0,this.getAllTicket()}dotask(){this.status=1,this.myTask=!0,this.getAllTicket()}completetask(){this.status=2,this.myTask=!0,this.getAllTicket()}canceltask(){this.status=3,this.myTask=!0,this.getAllTicket()}createTicket(){this.modal.create({nzContent:Ae,nzClosable:!1})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.Sf),t.Y36(F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["cms-tasks"]],decls:61,vars:24,consts:[["title","Qu\u1ea3n l\xfd nhi\u1ec7m v\u1ee5",3,"close"],["action",""],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],["content","",2,"height","76vh"],[1,"mt-8",2,"height","100%"],["nzWidth","230px","nzTheme","light",2,"border","1px solid #f0f0f0","box-shadow","rgb(0 0 0 / 10%) 0px 1px 4px","border-radius","5px"],["nz-menu","","nzMode","inline",2,"list-style-type","none","margin","0"],["nz-menu-item","","nzSelected","",1,"content-item","mt-3",3,"click"],["nz-typography",""],["nz-menu-item","",1,"content-item","mt-3",3,"click"],[1,"ml-5","mt-1"],["nz-row","",1,"mb-3",3,"nzGutter"],["nz-col","","nzSpan","4"],[3,"nzPrefix"],["type","text","nz-input","","placeholder","M\xe3 nhi\u1ec7m v\u1ee5",3,"ngModel","ngModelChange","keyup.enter"],["prefixIconSearch",""],["nzShowSearch","","nzPlaceHolder","Nh\u1eadp t\xean,email,sdt ng\u01b0\u1eddi t\u1ea1o ","nzAllowClear","",2,"width","100%",3,"ngModel","nzShowArrow","nzDropdownRender","nzFilterOption","ngModelChange","nzScrollToBottom","nzOnSearch","keyup.enter"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["renderTemplate",""],["nz-col","",3,"nzXs","nzSm","nzMd","nzLg","nzXl"],["nzFormat","dd/MM/yyyy","ngModel","",2,"width","97%",3,"nzPlaceHolder","ngModelChange","keyup.enter"],["nz-icon","","nzType","search"],[3,"nzData","nzFrontPagination","nzPageSize","nzPageIndex","nzTotal","nzFooter","nzPageIndexChange"],["basicTable",""],[4,"ngFor","ngForOf"],["footer",""],[3,"nzLabel","nzValue"],[4,"ngIf"],[3,"href"],["nz-button","","nzType","text","title","Xem chi ti\u1ebft",1,"mr-1",3,"routerLink"],["nz-icon","","nzType","eye","nzTheme","outline"]],template:function(e,i){if(1&e&&(t.TgZ(0,"cms-page",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return i.createTicket()}),t._UZ(3,"i",3),t._uU(4," T\u1ea1o m\u1edbi "),t.qZA(),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"nz-layout",5),t.TgZ(7,"nz-sider",6),t.TgZ(8,"ul",7),t.TgZ(9,"li",8),t.NdJ("click",function(){return i.alltask()}),t.TgZ(10,"span",9),t._uU(11,"T\u1ea5t c\u1ea3"),t.qZA(),t.qZA(),t.TgZ(12,"li",10),t.NdJ("click",function(){return i.mytask()}),t.TgZ(13,"span",9),t._uU(14,"Nhi\u1ec7m v\u1ee5 c\u1ee7a t\xf4i"),t.qZA(),t.qZA(),t.TgZ(15,"li",10),t.NdJ("click",function(){return i.dotask()}),t.TgZ(16,"span",9),t._uU(17,"\u0110ang th\u1ef1c hi\u1ec7n"),t.qZA(),t.qZA(),t.TgZ(18,"li",10),t.NdJ("click",function(){return i.completetask()}),t.TgZ(19,"span",9),t._uU(20,"\u0110\xe3 ho\xe0n th\xe0nh"),t.qZA(),t.qZA(),t.TgZ(21,"li",10),t.NdJ("click",function(){return i.canceltask()}),t.TgZ(22,"span",9),t._uU(23,"H\u1ee7y"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"nz-content",11),t.TgZ(25,"div",12),t.TgZ(26,"div",13),t.TgZ(27,"nz-input-group",14),t.TgZ(28,"input",15),t.NdJ("ngModelChange",function(s){return i.idTicket=s})("keyup.enter",function(){return i.searchAll()}),t.qZA(),t.qZA(),t.YNc(29,ye,1,0,"ng-template",null,16,t.W1O),t.qZA(),t.TgZ(31,"div",13),t.TgZ(32,"nz-select",17),t.NdJ("ngModelChange",function(s){return i.createBy=s})("nzScrollToBottom",function(){return i.loadMore()})("nzOnSearch",function(s){return i.search(s)})("keyup.enter",function(){return i.searchAll()}),t.YNc(33,xe,1,2,"nz-option",18),t.qZA(),t.YNc(34,we,1,1,"ng-template",null,19,t.W1O),t.qZA(),t.TgZ(36,"div",20),t.TgZ(37,"nz-range-picker",21),t.NdJ("ngModelChange",function(s){return i.onChange(s)})("keyup.enter",function(){return i.searchAll()}),t.qZA(),t.qZA(),t.TgZ(38,"div",13),t.TgZ(39,"button",2),t.NdJ("click",function(){return i.searchAll()}),t._UZ(40,"i",22),t._uU(41," T\xecm Ki\u1ebfm "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(42,"div"),t.TgZ(43,"nz-table",23,24),t.NdJ("nzPageIndexChange",function(s){return i.pageChange(s)}),t.TgZ(45,"thead"),t.TgZ(46,"tr"),t.TgZ(47,"th"),t._uU(48,"M\xe3 nhi\u1ec7m v\u1ee5"),t.qZA(),t.TgZ(49,"th"),t._uU(50,"Ti\xeau \u0111\u1ec1"),t.qZA(),t.TgZ(51,"th"),t._uU(52,"Ng\xe0y t\u1ea1o"),t.qZA(),t.TgZ(53,"th"),t._uU(54,"Ng\u01b0\u1eddi t\u1ea1o"),t.qZA(),t.TgZ(55,"th"),t._uU(56,"H\xe0nh \u0111\u1ed9ng"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(57,"tbody"),t.YNc(58,Se,14,8,"tr",25),t.qZA(),t.YNc(59,be,1,1,"ng-template",null,26,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const r=t.MAs(30),s=t.MAs(35),c=t.MAs(44),u=t.MAs(60);t.Q6J("close",!1),t.xp6(25),t.Q6J("nzGutter",t.DdM(22,De)),t.xp6(2),t.Q6J("nzPrefix",r),t.xp6(1),t.Q6J("ngModel",i.idTicket),t.xp6(4),t.Q6J("ngModel",i.createBy)("nzShowArrow",!1)("nzDropdownRender",s)("nzFilterOption",i.nzFilterOption),t.xp6(1),t.Q6J("ngForOf",i.listOfOption),t.xp6(3),t.Q6J("nzXs",12)("nzSm",12)("nzMd",12)("nzLg",12)("nzXl",6),t.xp6(1),t.Q6J("nzPlaceHolder",t.DdM(23,qe)),t.xp6(6),t.Q6J("nzData",i.listOfData)("nzFrontPagination",!1)("nzPageSize",i.size)("nzPageIndex",i.page)("nzTotal",i.total)("nzFooter",u),t.xp6(15),t.Q6J("ngForOf",c.data)}},directives:[d.Zd,E.ix,D.dQ,q.w,w.Ls,S.hw,S.t7,st.wO,st.r9,b.ZU,S.OK,z.SK,z.t3,C.gB,C.ke,C.Zp,a.Fj,a.JJ,a.On,Z.Vq,p.sg,y.uw,y.wS,T.N8,T.Om,T.$Z,T.Uo,T._C,T.p0,Z.Ip,p.O5,x.W,M.rH],pipes:[ot],styles:[".content-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),n})()},{path:"detail/:id",component:ze}];let Ne=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[M.Bz.forChild(Oe)],M.Bz]}),n})();var Re=l(94401),Je=l(13791),Y=l(58203),U=l(87636),at=l(90641),lt=l(68178);l(19238);let an=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})(),ln=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[Q.vT,p.ez,Y.U8,U.eL,w.PV,lt.T,at.g,an]]}),n})(),cn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.ez,Ne,d.IR,b.ZJ,it.X,Z.LV,m.Qp,S.wm,a.UX,w.PV,C.o7,h.U5,z.Jb,T.HQ,K.JF,E.sL,a.u5,x.j,W.S,L.cD,Re.b1,Yt,y.Hb,Je.zf,tt.cS,I.cg,j.Wr,ln,J.Ph]]}),n})()}}]);