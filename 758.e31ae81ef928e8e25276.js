"use strict";(self.webpackChunksmartlocker_workspace=self.webpackChunksmartlocker_workspace||[]).push([[758],{26758:(L,p,e)=>{e.r(p),e.d(p,{ActionControllerModule:()=>Q});var d=e(38583),A=e(39895),l=e(3679),c=e(34100),t=e(37716),h=e(26214),_=e(91841);let b=(()=>{class o{constructor(n){this.httpClient=n}createAction(n){return this.httpClient.post("smartlocker-ticket/api/v1/attached-actions",n)}getAllAction(){return this.httpClient.get("smartlocker-ticket/api/v1/attached-actions")}updateAction(n,i){return this.httpClient.put("smartlocker-ticket/api/v1/attached-actions/"+i,n)}deleteAction(n){return this.httpClient.delete("smartlocker-ticket/api/v1/attached-actions/"+n)}}return o.\u0275fac=function(n){return new(n||o)(t.LFG(_.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var z=e(14453),v=e(84514),Z=e(53599),u=e(43654),T=e(93845),m=e(75887),f=e(16704),C=e(57674),g=e(80269),x=e(29374);function F(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"nz-tag",20),t._uU(2),t.qZA(),t.BQk()),2&o){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("nzColor",1==n.status?"green":"red"),t.xp6(1),t.Oqu(1==n.status?"Active":"Inactive")}}function E(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.YNc(6,F,3,2,"ng-container",15),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t.TgZ(12,"button",16),t.NdJ("click",function(){const a=t.CHM(n).$implicit;return t.oxw().onEdit(a)}),t._UZ(13,"i",17),t.qZA(),t.TgZ(14,"button",18),t.NdJ("click",function(){const a=t.CHM(n).$implicit;return t.oxw().onDelete(a)}),t._UZ(15,"i",19),t.qZA(),t.qZA(),t.qZA()}if(2&o){const n=r.$implicit,i=r.index,s=t.oxw();t.xp6(2),t.Oqu((s.pageNumber-1)*s.pageSize+i+1),t.xp6(2),t.hij(" ",n.name," "),t.xp6(2),t.Q6J("ngIf",null!==n.status),t.xp6(2),t.Oqu(n.code),t.xp6(2),t.Oqu(n.description)}}function N(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const n=t.oxw(2);t.xp6(1),t.hij("T\u1ed5ng ",n.totalPage," b\u1ea3n ghi")}}function S(o,r){if(1&o&&t.YNc(0,N,2,1,"span",15),2&o){const n=t.oxw();t.Q6J("ngIf",n.totalPage)}}function q(o,r){if(1&o&&t._UZ(0,"nz-option",34),2&o){const n=r.$implicit;t.Q6J("nzValue",n.id)("nzLabel",n.name)}}function y(o,r){if(1&o&&(t.ynx(0),t.TgZ(1,"form",21),t.TgZ(2,"nz-form-item"),t.TgZ(3,"nz-form-label",22),t.TgZ(4,"span"),t._uU(5,"T\xean Action"),t.qZA(),t.qZA(),t.TgZ(6,"nz-form-control",23),t._UZ(7,"input",24),t.qZA(),t.qZA(),t.TgZ(8,"nz-form-item"),t.TgZ(9,"nz-form-label",25),t.TgZ(10,"span"),t._uU(11,"Key Code"),t.qZA(),t.qZA(),t.TgZ(12,"nz-form-control",26),t._UZ(13,"input",27),t.qZA(),t.qZA(),t.TgZ(14,"nz-form-item"),t.TgZ(15,"nz-form-label",28),t.TgZ(16,"span"),t._uU(17,"Tr\u1ea1ng th\xe1i"),t.qZA(),t.qZA(),t.TgZ(18,"nz-form-control",29),t.TgZ(19,"nz-select",30),t.YNc(20,q,1,2,"nz-option",31),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"nz-form-item"),t.TgZ(22,"nz-form-label",32),t.TgZ(23,"span"),t._uU(24,"Ghi ch\xfa"),t.qZA(),t.qZA(),t.TgZ(25,"nz-form-control",29),t._UZ(26,"textarea",33),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("formGroup",n.mainForm),t.xp6(2),t.Q6J("nzXs",24),t.xp6(3),t.Q6J("nzXs",24),t.xp6(3),t.Q6J("nzXs",24),t.xp6(3),t.Q6J("nzXs",24),t.xp6(3),t.Q6J("nzXs",24),t.xp6(3),t.Q6J("nzXs",24),t.xp6(2),t.Q6J("ngForOf",n.lstStatus),t.xp6(2),t.Q6J("nzXs",24),t.xp6(3),t.Q6J("nzXs",24)}}function J(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"button",35),t.NdJ("click",function(){return t.CHM(n),t.oxw().onSubmit()}),t._uU(2),t.qZA(),t.TgZ(3,"button",36),t.NdJ("click",function(){return t.CHM(n),t.oxw().onCancel()}),t._uU(4,"H\u1ee7y"),t.qZA(),t.qZA()}if(2&o){const n=t.oxw();t.xp6(1),t.Q6J("nzLoading",n.isLoading),t.xp6(1),t.hij(" ",n.isEdit?"C\u1eadp nh\u1eadp ":"T\u1ea1o m\u1edbi"," ")}}const U=[{path:"",component:(()=>{class o{constructor(n,i,s,a){this.baseService=n,this.fb=i,this.modal=s,this.actionControllerService=a,this.pageSize=10,this.pageNumber=1,this.totalPage=0,this.isEdit=!1,this.isVisibleForm=!1,this.isLoading=!1,this.currentAction=null,this.lstAction=[],this.lstStatus=[{id:0,name:"In Active"},{id:1,name:"Active"}],this.obj={name:null,code:null,description:null,id:null,status:null}}ngOnInit(){this.getAllAction(),this.createForm()}getAllAction(){this.isLoading=!0,this.actionControllerService.getAllAction().subscribe(n=>{n&&n.data&&(this.isLoading=!1,this.lstAction=n.data.data,this.totalPage=n.data.total)})}onCreate(){this.isEdit=!1,this.isVisibleForm=!0,this.clearValue()}onEdit(n){this.isVisibleForm=!0,this.isEdit=!0,this.currentAction=n,this.setValue(n)}setValue(n){this.mainForm.controls.name.setValue(n.name),this.mainForm.controls.description.setValue(n.description),this.mainForm.controls.code.setValue(n.code),this.mainForm.controls.status.setValue(n.status)}onDelete(n){this.modal.confirm({nzTitle:`<i>B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n x\xf3a action <b>${n.name}</b> n\xe0y kh\xf4ng?</i>`,nzOnOk:()=>{this.baseService.showLoading(!0),this.actionControllerService.deleteAction(n.id).subscribe(i=>{this.baseService.showLoading(!1),0===i.error&&(this.baseService.showToast("X\xf3a action h\xe0ng th\xe0nh c\xf4ng",c.gT.TOAST_OK),this.getAllAction())},()=>{this.baseService.showLoading(!1)})},nzClosable:!1,nzCancelText:"T\xf4i kh\xf4ng mu\u1ed1n",nzOkText:"\u0110\u1ed3ng \xfd"})}onSubmit(){this.mainForm.valid?(this.isLoading=!0,this.isEdit?(this.obj.description=this.mainForm.controls.description.value,this.obj.name=this.mainForm.controls.name.value,this.obj.code=this.mainForm.controls.code.value,this.obj.status=this.mainForm.controls.status.value,this.obj.id=this.currentAction.id,this.baseService.showLoading(!0),this.actionControllerService.updateAction(this.obj,this.currentAction.id).subscribe(n=>{n?(this.baseService.showLoading(!1),this.isLoading=!1,this.baseService.showNotification("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng action",c.gT.NOTI_OK),this.getAllAction(),this.onCancel()):this.baseService.showNotification("C\u1eadp nh\u1eadt kh\xf4ng th\xe0nh c\xf4ng action",c.gT.NOTI_ERROR)})):(this.obj.description=this.mainForm.controls.description.value,this.obj.name=this.mainForm.controls.name.value,this.obj.code=this.mainForm.controls.code.value,this.obj.status=this.mainForm.controls.status.value,this.baseService.showLoading(!0),this.actionControllerService.createAction(this.obj).subscribe(n=>{n&&n.data?(this.baseService.showLoading(!1),this.isLoading=!1,this.baseService.showNotification("Kh\u1edfi t\u1ea1o th\xe0nh c\xf4ng Action",c.gT.NOTI_OK),this.getAllAction(),this.onCancel()):this.baseService.showNotification("Kh\u1edfi t\u1ea1o kh\xf4ng th\xe0nh c\xf4ng Action",c.gT.NOTI_ERROR)}))):Object.values(this.mainForm.controls).forEach(n=>{n.invalid&&(n.markAsDirty(),n.updateValueAndValidity({onlySelf:!0}))})}onCancel(){this.isVisibleForm=!1,this.clearValue()}pageChange(n){this.pageNumber=n,this.getAllAction()}clearValue(){this.mainForm.reset(),this.obj.id=null,this.obj.name=null,this.obj.description=null,this.obj.code=null,this.obj.status=null}createForm(){this.mainForm=this.fb.group({name:new l.NI(null,l.kI.required),description:new l.NI(null),status:new l.NI(null),code:new l.NI(null,l.kI.required)})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(c.bQ),t.Y36(l.qu),t.Y36(h.Sf),t.Y36(b))},o.\u0275cmp=t.Xpm({type:o,selectors:[["cms-action-controller"]],decls:31,vars:11,consts:[[3,"title","close"],["action",""],["nz-button","","nzType","primary",1,"mr-3",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[1,"d-none","d-md-inline-block"],["content",""],[1,"my-3","pt-5"],[3,"nzFrontPagination","nzPageSize","nzPageIndex","nzTotal","nzFooter","nzData","nzPageIndexChange"],["basicTable",""],["nzWidth","160px"],[4,"ngFor","ngForOf"],["footer",""],["nzTitle","T\u1ea1o m\u1edbi Action",3,"nzVisible","nzClosable","nzVisibleChange"],[4,"nzModalContent"],[4,"nzModalFooter"],[4,"ngIf"],["nz-button","","nzType","text","title","S\u1eeda",1,"mr-1",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-button","","nzType","text","title","X\xf3a",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline",1,"text-danger"],[3,"nzColor"],["nz-form","",1,"px-3",3,"formGroup"],["nzFor","name","nzRequired","",3,"nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp t\xean Action!",3,"nzXs"],["nz-input","","id","name","formControlName","name","placeholder","Nh\u1eadp t\xean Action",1,"pl-3"],["nzFor","code","nzRequired","",3,"nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp key code!",3,"nzXs"],["nz-input","","formControlName","code","id","code","name","code","placeholder","Nh\u1eadp KeyCode"],["nzFor","status",3,"nzXs"],[3,"nzXs"],["nzShowSearch","","formControlName","status","nzPlaceHolder","Ch\u1ecdn tr\u1ea1ng th\xe1i","nzAllowClear","",1,"width-full"],["class","width-full",3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzFor","description",3,"nzXs"],["nz-input","","formControlName","description","id","description","name","description","placeholder","Nh\u1eadp ghi ch\xfa"],[1,"width-full",3,"nzValue","nzLabel"],["nz-button","","nzType","primary",1,"m-2",3,"nzLoading","click"],["nz-button","","nzType","default",3,"click"]],template:function(n,i){if(1&n&&(t.TgZ(0,"cms-page",0),t.TgZ(1,"div",1),t.TgZ(2,"a",2),t.NdJ("click",function(){return i.onCreate()}),t._UZ(3,"i",3),t.TgZ(4,"span",4),t._uU(5,"T\u1ea1o m\u1edbi"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t.TgZ(8,"nz-table",7,8),t.NdJ("nzPageIndexChange",function(a){return i.pageChange(a)}),t.TgZ(10,"thead"),t.TgZ(11,"tr"),t.TgZ(12,"th"),t._uU(13,"STT"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"T\xean Action"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Tr\u1ea1ng th\xe1i"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Key code"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Ghi ch\xfa"),t.qZA(),t.TgZ(22,"th",9),t._uU(23,"H\xe0nh \u0111\u1ed9ng"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"tbody"),t.YNc(25,E,16,5,"tr",10),t.qZA(),t.YNc(26,S,1,1,"ng-template",null,11,t.W1O),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"nz-modal",12),t.NdJ("nzVisibleChange",function(a){return i.isVisibleForm=a}),t.YNc(29,y,27,10,"ng-container",13),t.YNc(30,J,5,2,"div",14),t.qZA()),2&n){const s=t.MAs(9),a=t.MAs(27);t.Q6J("title","Qu\u1ea3n l\xfd Action")("close",!1),t.xp6(8),t.Q6J("nzFrontPagination",!1)("nzPageSize",i.pageSize)("nzPageIndex",i.pageNumber)("nzTotal",i.totalPage)("nzFooter",a)("nzData",i.lstAction),t.xp6(17),t.Q6J("ngForOf",s.data),t.xp6(3),t.Q6J("nzVisible",i.isVisibleForm)("nzClosable",!1)}},directives:[c.Zd,z.ix,v.w,Z.Ls,u.N8,u.Om,u.$Z,u.Uo,u._C,u.p0,d.sg,h.du,h.Hf,h.Uh,d.O5,T.j,l._Y,l.JL,m.Lr,l.sg,f.SK,m.Nx,f.t3,m.iK,m.Fd,C.Zp,l.Fj,l.JJ,l.u,g.Vq,g.Ip,x.dQ],styles:[""]}),o})()}];let V=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[A.Bz.forChild(U)],A.Bz]}),o})();var k=e(94401),O=e(52079);let Q=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.ez,V,c.IR,u.HQ,l.u5,l.UX,z.sL,Z.PV,h.Qp,m.U5,C.o7,k.b1,g.LV,O.Wr,T.X]]}),o})()}}]);